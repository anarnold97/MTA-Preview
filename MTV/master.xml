<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE book [
<!ENTITY % sgml.features "IGNORE">
<!ENTITY % xml.features "INCLUDE">
<!ENTITY % DOCBOOK_ENTS PUBLIC "-//OASIS//ENTITIES DocBook Character Entities V4.5//EN" "http://www.oasis-open.org/docbook/xml/4.5/dbcentx.mod">
%DOCBOOK_ENTS;
]>
<?asciidoc-toc maxdepth="2"?><?asciidoc-numbered?><book xmlns="http://docbook.org/ns/docbook" xmlns:xlink="http://www.w3.org/1999/xlink" version="5.0">
<info>
<title>Release notes</title><subtitle>Version 2.6</subtitle>

<date>2024-08-11</date>
<productname>Migration Toolkit for Virtualization</productname>
<productnumber>2.6</productnumber>
<abstract>
    <para>This document describes new features, known issues, and resolved issues for the Migration Toolkit for Virtualization 2.6.</para>
</abstract>
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="Author_Group.xml"/>
<xi:include xmlns:xi="http://www.w3.org/2001/XInclude" href="Common_Content/Legal_Notice.xml"/>
</info>
<preface xml:id="making-open-source-more-inclusive">
<title>Making open source more inclusive</title>
<simpara>Red Hat is committed to replacing problematic language in our code, documentation, and web properties. We are beginning with these four terms: master, slave, blacklist, and whitelist. Because of the enormity of this endeavor, these changes will be implemented gradually over several upcoming releases. For more details, see <link xlink:href="https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language">our CTO Chris Wright’s message</link>.</simpara>
</preface>
<chapter xml:id="rn-26_release-notes">
<title>Migration Toolkit for Virtualization 2.6</title>
<simpara>You can use the Migration Toolkit for Virtualization (MTV) to migrate virtual machines from the following source providers to OpenShift Virtualization destination providers:</simpara>
<itemizedlist>
<listitem>
<simpara>VMware vSphere</simpara>
</listitem>
<listitem>
<simpara>Red Hat Virtualization (RHV)</simpara>
</listitem>
<listitem>
<simpara>OpenStack</simpara>
</listitem>
<listitem>
<simpara>Open Virtual Appliances (OVAs) that were created by VMware vSphere</simpara>
</listitem>
<listitem>
<simpara>Remote OpenShift Virtualization clusters</simpara>
</listitem>
</itemizedlist>
<simpara>The release notes describe technical changes, new features and enhancements, known issues, and resolved issues.</simpara>
<section xml:id="technical-changes-26_release-notes">
<title>Technical changes</title>
<simpara>This release has the following technical changes:</simpara>
<formalpara>
<title>Simplified the creation of vSphere providers</title>
<para>In earlier releases of MTV, users had to specify a fingerprint when creating a vSphere provider. This required users to retrieve the fingerprint from the server that vCenter runs on. MTV no longer requires this fingerprint as an input, but rather computes it from the specified certificate in the case of a secure connection or automatically retrieves it from the server that runs vCenter/ESXi in the case of an insecure connection.</para>
</formalpara>
<formalpara>
<title>Redesigned the migration plan creation dialog</title>
<para>The user interface console has improved the process of creating a migration plan. The new migration plan dialog enables faster creation of migration plans.</para>
</formalpara>
<simpara>It includes only the minimal settings that are required, while you can confirgure advanced settings separately. The new dialog also provides defaults for network and storage mappings, where applicable. The new dialog can also be invoked from the the <literal>Provider</literal> &gt; <literal>Virtual Machines</literal> tab, after selecting the virtual machines to migrate. It also better aligns with the user experience in the OCP console.</simpara>
<formalpara>
<title><literal>virtual machine preferences</literal> have replaced OpenShift templates</title>
<para>The <literal>virtual machine preferences</literal> have replaced OpenShift templates. MTV currently falls back to using OpenShift templates when a relevant preference is not available.</para>
</formalpara>
<simpara>Custom mappings of guest operating system type to virtual machine preference can be configured using <literal>config</literal> maps. This is in order to use custom virtual machine preferences, or to support more guest operating system types.</simpara>
<formalpara>
<title>Full support for migration from OVA</title>
<para>Migration from OVA moves from being a Technical Preview and is now a fully supported feature.</para>
</formalpara>
<formalpara>
<title>The VM is posted with its desired <literal>Running</literal> state</title>
<para>MTV creates the VM with its desired <literal>Running</literal> state on the target provider, instead of creating the VM and then running it as an additional operation. <link xlink:href="https://issues.redhat.com/browse/MTV-794">(MTV-794)</link></para>
</formalpara>
<formalpara>
<title>The <literal>must-gather</literal> logs can now be loaded only by using the CLI</title>
<para>The MTV web console can no longer download logs. With this update, you must download <literal>must-gather</literal> logs by using CLI commands. For more information, see <link xlink:href="https://github.com/openshift/must-gather-operator">Must Gather Operator</link>.</para>
</formalpara>
<formalpara>
<title>MTV no longer runs <literal>pvc-init</literal> pods when migrating from vSphere</title>
<para>MTV no longer runs <literal>pvc-init</literal> pods during cold migration from a vSphere provider to the OpenShift cluster that MTV is deployed on. However, in other flows where data volumes are used, they are set with the <literal>cdi.kubevirt.io/storage.bind.immediate.requested</literal> annotation, and CDI runs first-consume pods for storage classes with volume binding mode <literal>WaitForFirstConsumer</literal>.</para>
</formalpara>
</section>
<section xml:id="new-features-and-enhancements-26_release-notes">
<title>New features and enhancements</title>
<simpara>This section provides features and enhancements introduced in Migration Toolkit for Virtualization 2.6.</simpara>
<section xml:id="new-features-and-enhancements-26-3_release-notes">
<title>New features and enhancements 2.6.3</title>
<formalpara>
<title>Support for migrating LUKS-encrypted devices in migrations from vSphere</title>
<para>You can now perform cold migrations from a vSphere provider of VMs whose virtual disks are encrypted by Linux Unified Key Setup (LUKS). <link xlink:href="https://issues.redhat.com/browse/MTV-831">(MTV-831)</link></para>
</formalpara>
<formalpara>
<title>Specifying the primary disk when migrating from vSphere</title>
<para>You can now specify the primary disk when you migrate VMs from vSphere with more than one bootable disk. This avoids MTV automatically attempting to convert the first bootable disk that it detects while it examines all the disks of a virtual machine. This feature is needed because the first bootable disk is not necessarily the disk that the VM is expected to boot from in OpenShift Virtualization. <link xlink:href="https://issues.redhat.com/browse/MTV-1079">(MTV-1079)</link></para>
</formalpara>
<formalpara>
<title>Links to remote provider UIs</title>
<para>You can now remotely access the UI of a remote cluster when you create a source provider. For example, if the provider is a remote Red Hat Virtualization RHV cluster, MTV adds a link to the remote RHV web console when you define the provider. This feature makes it easier for you to manage and debug a migration from remote clusters. <link xlink:href="https://issues.redhat.com/browse/MTV-1054">(MTV-1054)</link></para>
</formalpara>
</section>
<section xml:id="new-features-and-enhancements-26-0_release-notes">
<title>New features and enhancements 2.6.0</title>
<formalpara>
<title>Migration from vSphere over a secure connection</title>
<para>You can now specify a CA certificate that can be used to authenticate the server that runs vCenter or ESXi, depending on the specified SDK endpoint of the vSphere provider. <link xlink:href="https://issues.redhat.com/browse/MTV-530">(MTV-530)</link></para>
</formalpara>
<formalpara>
<title>Migration to or from a remote OpenShift over a secure connection</title>
<para>You can now specify a CA certificate that can be used to authenticate the API server of a remote OpenShift cluster. <link xlink:href="https://issues.redhat.com/browse/MTV-728">(MTV-728)</link></para>
</formalpara>
<formalpara>
<title>Migration from an ESXi server without going through vCenter</title>
<para>MTV enables the configuration of vSphere providers with the SDK of ESXi. You need to select ESXi as the Endpoint type of the vSphere provider and specify the URL of the SDK of the ESXi server. <link xlink:href="https://issues.redhat.com/browse/MTV-514">(MTV-514)</link></para>
</formalpara>
<formalpara>
<title>Migration of image-based VMs from OpenStack</title>
<para>MTV supports the migration of VMs that were created from images in OpenStack. <link xlink:href="https://issues.redhat.com/browse/MTV-644">(MTV-644)</link></para>
</formalpara>
<formalpara>
<title>Migration of VMs with Fibre Channel LUNs from RHV</title>
<para>MTV supports migrations of VMs that are set with Fibre Channel (FC) LUNs from RHV. As with other LUN disks, you need to ensure the OpenShift nodes have access to the FC LUNs. During the migrations, the FC LUNs are detached from the source VMs in RHV and attached to the migrated VMs in OpenShift. <link xlink:href="https://issues.redhat.com/browse/MTV-659">(MTV-659)</link></para>
</formalpara>
<formalpara>
<title>Preserve CPU types of VMs that are migrated from RHV</title>
<para>MTV sets the CPU type of migrated VMs in OpenShift with their custom CPU type in RHV. In addition, a new option was added to migration plans that are set with RHV as a source provider to preserve the original CPU types of source VMs. When this option is selected, MTV identifies the CPU type based on the cluster configuration and sets this CPU type for the migrated VMs, for which the source VMs are not set with a custom CPU. <link xlink:href="https://issues.redhat.com/browse/MTV-547">(MTV-547)</link></para>
</formalpara>
<formalpara>
<title>Validation for RHEL 6 guest operating system is now available when migrating VMs with RHEL 6 guest operating system</title>
<para>Red Hat Enterprise Linux (RHEL) 9 does not support RHEL 6 as a guest operating system. Therefore, RHEL 6 is not supported in OpenShift Virtualization. With this update, a validation of RHEL 6 guest operating system was added to OpenShift Virtualization. <link xlink:href="https://issues.redhat.com/browse/MTV-413">(MTV413)</link></para>
</formalpara>
<formalpara>
<title>Automatic retrieval of CA certificates for the provider’s URL in the console</title>
<para>The ability to retrieve CA certificates, which was available in previous versions, has been restored. The <literal>vSphere Verify certificate</literal> option is in the <literal>add-provider</literal> dialog. This option was removed in the transition to the Red Hat OpenShift console and has now been added to the console. This functionality is also available for RHV, OpenStack, and OpenShift providers now. <link xlink:href="https://issues.redhat.com/browse/MTV-737">(MTV-737)</link></para>
</formalpara>
<formalpara>
<title>Validation of a specified VDDK image</title>
<para>MTV validates the availability of a VDDK image that is specified for a vSphere provider on the target OpenShift name as part of the validation of a migration plan. MTV also checks whether the <literal>libvixDiskLib.so</literal> symbolic link (symlink) exists within the image. If the validation fails, the migration plan cannot be started. <link xlink:href="https://issues.redhat.com/browse/MTV-618">(MTV-618)</link></para>
</formalpara>
<formalpara>
<title>Add a warning and partial support for TPM</title>
<para>MTV presents a warning when attempting to migrate a VM that is set with a TPM device from RHV or vSphere. The migrated VM in OpenShift would be set with a TPM device but without the content of the TPM device on the source environment. <link xlink:href="https://issues.redhat.com/browse/MTV-378">(MTV-378)</link></para>
</formalpara>
<formalpara>
<title>Plans that failed to migrate VMs can now be edited</title>
<para>With this update, you can edit plans that have failed to migrate any VMs. Some plans fail or are canceled because of incorrect network and storage mappings. You can now edit these plans until they succeed. <link xlink:href="https://issues.redhat.com/browse/MTV-779">(MTV-779)</link></para>
</formalpara>
<formalpara>
<title>Validation rules are now available for OVA</title>
<para>The validation service includes default validation rules for virtual machines from the Open Virtual Appliance (OVA). <link xlink:href="https://issues.redhat.com/browse/MTV-669">(MTV-669)</link></para>
</formalpara>
</section>
</section>
<section xml:id="resolved-issues-26_release-notes">
<title>Resolved issues</title>
<simpara>This release has the following resolved issues:</simpara>
<section xml:id="resolved-issues-26-4_release-notes">
<title>Resolved issues 2.6.4</title>
<formalpara>
<title>Preserve IP option for Windows does not preserve all settings</title>
<para>In earlier releases of MTV, while migrating a Windows 2022 Server with a static IP address assigned, and selecting the <emphasis role="strong">Preserve static IPs</emphasis> option, after a successful Windows migration, while the node started and the IP address was preserved, the subnet mask, gateway, and DNS servers were not preserved. This resulted in an incomplete migration, and the customer was forced to log in locally from the console to fully configure the network. This issue has been resolved in MTV 2.6.4. <link xlink:href="https://issues.redhat.com/browse/MTV-1286">(MTV-1286)</link></para>
</formalpara>
<formalpara>
<title><literal>qemu-guest-agent</literal> not being installed at first boot in Windows Server 2022</title>
<para>After a successful Windows 2022 server guest migration using MTV 2.6.1, the <literal>qemu-guest-agent</literal> is not completely installed. The Windows Scheduled task is being created, however it is being set to run 4 hours in the future instead of the intended 2 minutes in the future. <link xlink:href="https://issues.redhat.com/browse/MTV-1325">(MTV-1325)</link></para>
</formalpara>
</section>
<section xml:id="resolved-issues-26-3_release-notes">
<title>Resolved issues 2.6.3</title>
<formalpara>
<title>CVE-2024-24788: <literal>golang: net</literal> malformed DNS message can cause infinite loop</title>
<para>In earlier releases of MTV, there was a flaw was discovered in the <literal>stdlib</literal> package of the Go programming language, which impacts previous versions of MTV. This vulnerability primarily threatens web-facing applications and services that rely on Go for DNS queries. This flaw has been resolved in MTV 2.6.3.</para>
</formalpara>
<simpara>For more details, see <link xlink:href="https://access.redhat.com/security/cve/cve-2024-24788">(CVE-2024-24788)</link>.</simpara>
<formalpara>
<title>Migration scheduling does not take into account that <literal>virt-v2v</literal> copies disks sequentially (vSphere only)</title>
<para>In earlier releases of MTV, there was a problem with the way MTV interpreted the <literal>controller_max_vm_inflight</literal> setting for vSphere to schedule migrations. This issue has been resolved in MTV 2.6.3. <link xlink:href="https://issues.redhat.com/browse/MTV-1191">(MTV-1191)</link></para>
</formalpara>
<formalpara>
<title>Cold migrations fail after changing the ESXi network (vSphere only)</title>
<para>In earlier versions of MTV, cold migrations from a vSphere provider with an ESXi SDK endpoint failed if any network was used except for the default network for disk transfers. This issue has been resolved in MTV 2.6.3. <link xlink:href="https://issues.redhat.com/browse/MTV-1180">(MTV-1180)</link></para>
</formalpara>
<formalpara>
<title>Warm migrations over an ESXi network are stuck in <literal>DiskTransfer</literal> state (vSphere only)</title>
<para>In earlier versions of MTV, warm migrations over an ESXi network from a vSphere provider with a vCenter SDK endpoint were stuck in <literal>DiskTransfer</literal> state because MTV was unable to locate image snapshots. This issue has been resolved in MTV 2.6.3. <link xlink:href="https://issues.redhat.com/browse/MTV-1161">(MTV-1161)</link></para>
</formalpara>
<formalpara>
<title>Leftover PVCs are in <literal>Lost</literal> state after cold migrations</title>
<para>In earlier versions of MTV, after cold migrations, there were leftover PVCs that had a status of <literal>Lost</literal> instead of being deleted, even after the migration plan that created them was archived and deleted. Investigation showed that this was because importer pods were retained after copying, by default, rather than in only specific cases. This issue has been resolved in MTV 2.6.3. <link xlink:href="https://issues.redhat.com/browse/MTV-1095">(MTV-1095)</link></para>
</formalpara>
<formalpara>
<title>Guest operating system from vSphere might be missing (vSphere only)</title>
<para>In earlier versions of MTV, some VMs that were imported from vSphere were not mapped to a template in OpenShift while other VMs, with the same guest operating system, were mapped to the corresponding template. Investigations indicated that this was because vSphere stopped reporting the operating system after not receiving updates from VMware tools for some time. This issue has been resolved in MTV 2.6.3 by taking the value of the operating system from the output of the investigation that <literal>virt-v2v</literal> performs on the disks. <link xlink:href="https://issues.redhat.com/browse/MTV-1046">(MTV-1046)</link></para>
</formalpara>
</section>
<section xml:id="resolved-issues-26-2_release-notes">
<title>Resolved issues 2.6.2</title>
<formalpara>
<title>CVE-2023-45288: Golang <literal>net/http, x/net/http2</literal>: unlimited number of <literal>CONTINUATION</literal> frames can cause a denial-of-service (DoS) attack</title>
<para>A flaw was discovered with the implementation of the <literal>HTTP/2</literal> protocol in the Go programming language, which impacts previous versions of MTV. There were insufficient limitations on the number of CONTINUATION frames sent within a single stream. An attacker could potentially exploit this to cause a denial-of-service (DoS) attack. This flaw has been resolved in MTV 2.6.2.</para>
</formalpara>
<simpara>For more details, see <link xlink:href="https://access.redhat.com/security/cve/cve-2023-45288">(CVE-2023-45288)</link>.</simpara>
<formalpara>
<title>CVE-2024-24785: <literal>mtv-api-container</literal>: Golang <literal>html/template: errors</literal> returned from <literal>MarshalJSON</literal> methods may break template escaping</title>
<para>A flaw was found in the <literal>html/template</literal> Golang standard library package, which impacts previous versions of MTV. If errors returned from <literal>MarshalJSON</literal> methods contain user-controlled data, they may be used to break the contextual auto-escaping behavior of the HTML/template package, allowing subsequent actions to inject unexpected content into the templates. This flaw has been resolved in MTV 2.6.2.</para>
</formalpara>
<simpara>For more details, see <link xlink:href="https://access.redhat.com/security/cve/cve-2024-24785">(CVE-2024-24785)</link>.</simpara>
<formalpara>
<title>CVE-2024-24784: <literal>mtv-validation-container</literal>: Golang <literal>net/mail</literal>: comments in display names are incorrectly handled</title>
<para>A flaw was found in the <literal>net/mail</literal> Golang standard library package, which impacts previous versions of MTV. The <literal>ParseAddressList</literal> function incorrectly handles comments, text in parentheses, and display names. As this is a misalignment with conforming address parsers, it can result in different trust decisions being made by programs using different parsers. This flaw has been resolved in MTV 2.6.2.</para>
</formalpara>
<simpara>For more details, see <link xlink:href="https://access.redhat.com/security/cve/cve-2024-24784">(CVE-2024-24784)</link>.</simpara>
<formalpara>
<title>CVE-2024-24783: <literal>mtv-api-container</literal>: Golang <literal>crypto/x509</literal>: Verify panics on certificates with an unknown public key algorithm</title>
<para>A flaw was found in the <literal>crypto/x509</literal> Golang standard library package, which impacts previous versions of MTV. Verifying a certificate chain that contains a certificate with an unknown public key algorithm causes <literal>Certificate.Verify</literal> to panic. This affects all <literal>crypto/tls</literal> clients and servers that set <literal>Config.ClientAuth</literal> to <literal>VerifyClientCertIfGiven</literal> or <literal>RequireAndVerifyClientCert</literal>. The default behavior is for TLS servers to not verify client certificates. This flaw has been resolved in MTV 2.6.2.</para>
</formalpara>
<simpara>For more details, see <link xlink:href="https://access.redhat.com/security/cve/cve-2024-24783">(CVE-2024-24783)</link>.</simpara>
<formalpara>
<title>CVE-2023-45290: <literal>mtv-api-container</literal>: Golang <literal>net/http</literal> memory exhaustion in <literal>Request.ParseMultipartForm</literal></title>
<para>A flaw was found in the <literal>net/http</literal> Golang standard library package, which impacts previous versions of MTV. When parsing a <literal>multipart</literal> form, either explicitly with <literal>Request.ParseMultipartForm</literal> or implicitly with <literal>Request.FormValue</literal>, <literal>Request.PostFormValue</literal>, or <literal>Request.FormFile</literal>, limits on the total size of the parsed form are not applied to the memory consumed while reading a single form line. This permits a maliciously crafted input containing long lines to cause the allocation of arbitrarily large amounts of memory, potentially leading to memory exhaustion. This flaw has been resolved in MTV 2.6.2.</para>
</formalpara>
<simpara>For more details, see <link xlink:href="https://access.redhat.com/security/cve/cve-2023-45290">(CVE-2023-45290)</link>.</simpara>
<formalpara>
<title>ImageConversion does not run when target storage is set with WaitForFirstConsumer (WFFC)</title>
<para>In earlier releases of MTV, migration of VMs failed because the migration was stuck in the <literal>AllocateDisks</literal> phase. As a result of being stuck, the migration did not progress, and PVCs were not bound. The root cause of the issue was that <literal>ImageConversion</literal> did not run when target storage was set for <literal>wait-for-first-consumer</literal>. The problem was resolved in MTV 2.6.2. <link xlink:href="https://issues.redhat.com/browse/MTV-1126">(MTV-1126)</link></para>
</formalpara>
<formalpara>
<title>forklift-controller panics when importing VMs with direct LUNs</title>
<para>In earlier releases of MTV, <literal>forklift-controller</literal> panicked when a user attempted to import VMs that had direct LUNs. The problem was resolved in MTV 2.6.2. <link xlink:href="https://issues.redhat.com/browse/MTV-1134">(MTV-1134)</link></para>
</formalpara>
</section>
<section xml:id="resolved-issues-26-1_release-notes">
<title>Resolved issues 2.6.1</title>
<formalpara>
<title>VMs with multiple disks that are migrated from vSphere and OVA files are not being fully copied</title>
<para>In MTV 2.6.0, there was a problem in copying VMs with multiple disks from VMware vSphere and from OVA files. The migrations appeared to succeed but all the disks were transferred to the same PV in the target environment while other disks were empty. In some cases, bootable disks were overridden, so the VM could not boot. In other cases, data from the other disks was missing. The problem was resolved in MTV 2.6.1. <link xlink:href="https://issues.redhat.com/browse/MTV-1067">(MTV-1067)</link></para>
</formalpara>
<formalpara>
<title>Migrating VMs from one Red Hat OpenShift cluster to another fails due to a timeout</title>
<para>In MTV 2.6.0,  migrations from one Red Hat OpenShift cluster to another failed when the time to transfer the disks of a VM exceeded the time to live (TTL) of the Export API in OpenShift, which was set to 2 hours by default. The problem was resolved in MTV 2.6.1 by setting the default TTL of the Export API to 12 hours, which greatly reduces the possibility of an expiration of the Export API. Additionally, you can increase or decrease the TTL setting as needed. <link xlink:href="https://issues.redhat.com/browse/MTV-1052">(MTV-1052)</link></para>
</formalpara>
<formalpara>
<title>MTV forklift-controller pod crashes when receiving a disk without a datastore</title>
<para>In earlier releases of MTV, if a VM was configured with a disk that was on a datastore that was no longer available in vSphere at the time a migration was attempted, the <literal>forklift-controller</literal> crashed, rendering MTV unusable. In MTV 2.6.1, MTV presents a critical validation for VMs with such disks, informing users of the problem, and the <literal>forklift-controller</literal> no longer crashes, although it cannot transfer the disk. <link xlink:href="https://issues.redhat.com/browse/MTV-1029">(MTV-1029)</link></para>
</formalpara>
</section>
<section xml:id="resolved-issues-26-0_release-notes">
<title>Resolved issues 2.6.0</title>
<formalpara>
<title>Deleting an OVA provider automatically also deletes the PV</title>
<para>In earlier releases of MTV, the PV was not removed when the OVA provider was deleted. This has been resolved in MTV 2.6.0, and the PV is automatically deleted when the OVA provider is deleted. <link xlink:href="https://issues.redhat.com/browse/MTV-848">(MTV-848)</link></para>
</formalpara>
<formalpara>
<title>Fix for data being lost when migrating VMware VMs with snapshots</title>
<para>In earlier releases of MTV, when migrating a VM that has a snapshot from VMware, the VM that was created in OpenShift Virtualization contained the data in the snapshot but not the latest data of the VM. This has been resolved in MTV 2.6.0.  <link xlink:href="https://issues.redhat.com/browse/MTV-447">(MTV-447)</link></para>
</formalpara>
<formalpara>
<title>Canceling and deleting a failed migration plan does not clean up the <literal>populate</literal> pods and PVC</title>
<para>In earlier releases of MTV, when you canceled and deleted a failed migration plan, and after creating a PVC and spawning the <literal>populate</literal> pods, the <literal>populate</literal> pods and PVC were not deleted. You had to delete the pods and PVC manually. This issue has been resolved in MTV 2.6.0. <link xlink:href="https://issues.redhat.com/browse/MTV-678">(MTV-678)</link></para>
</formalpara>
<formalpara>
<title>Red Hat OpenShift to Red Hat OpenShift migrations require the cluster version to be 4.13 or later</title>
<para>In earlier releases of MTV, when migrating from Red Hat OpenShift to Red Hat OpenShift, the version of the source provider cluster had to be Red Hat OpenShift version 4.13 or later. This issue has been resolved in MTV 2.6.0, with validation being shown when migrating from versions of OpenShift before 4.13. <link xlink:href="https://issues.redhat.com/browse/MTV-734">(MTV-734)</link></para>
</formalpara>
<formalpara>
<title>Multiple storage domains from RHV were always mapped to a single storage class</title>
<para>In earlier releases of MTV, multiple disks from different storage domains were always mapped to a single storage class, regardless of the storage mapping that was configured. This issue has been resolved in MTV 2.6.0. <link xlink:href="https://issues.redhat.com/browse/MTV-1008">(MTV-1008)</link></para>
</formalpara>
<formalpara>
<title>Firmware detection by virt-v2v</title>
<para>In earlier releases of MTV, a VM that was migrated from an OVA that did not include the firmware type in its OVF configuration was set with UEFI. This was incorrect for VMs that were configured with BIOS. This issue has been resolved in MTV 2.6.0, as MTV now consumes the firmware that is detected by <literal>virt-v2v</literal> during the conversion of the disks. <link xlink:href="https://issues.redhat.com/browse/MTV-759">(MTV-759)</link></para>
</formalpara>
<formalpara>
<title>Creating a host secret requires validation of the secret before creation of the host</title>
<para>In earlier releases of MTV, when configuring a transfer network for vSphere hosts, the console plugin created the <literal>Host</literal> CR before creating its secret. The secret should be specified first in order to validate it before the <literal>Host</literal> CR is posted. This issue has been resolved in MTV 2.6.0. <link xlink:href="https://issues.redhat.com/browse/MTV-868">(MTV-868)</link></para>
</formalpara>
<formalpara>
<title>When adding OVA provider a <literal>ConnectionTestFailed</literal> message appears</title>
<para>In earlier releases of MTV, when adding an OVA provider, the error message <literal>ConnectionTestFailed</literal> instantly appeared, although the provider had been created successfully. This issue has been resolved in MTV 2.6.0. <link xlink:href="https://issues.redhat.com/browse/MTV-671">(MTV-671)</link></para>
</formalpara>
<formalpara>
<title>RHV provider <literal>ConnectionTestSucceeded</literal> True response from the wrong URL</title>
<para>In earlier releases of MTV, the <literal>ConnectionTestSucceeded</literal> condition was set to <literal>True</literal> even when the URL was different than the API endpoint for the RHV Manager. This issue has been resolved in MTV 2.6.0. <link xlink:href="https://issues.redhat.com/browse/MTV-740">(MTV-740)</link></para>
</formalpara>
<formalpara>
<title>Migration does not fail when a vSphere Data Center is nested inside a folder</title>
<para>In earlier releases of MTV, migrating a VM that is placed in a Data Center that is stored directly under the <literal>/vcenter</literal> in vSphere succeeded. However, it failed when the Data Center was stored inside a folder. This issue was resolved in MTV 2.6.0. <link xlink:href="https://issues.redhat.com/browse/MTV-796">(MTV-796)</link></para>
</formalpara>
<formalpara>
<title>The OVA inventory watcher detects deleted files</title>
<para>The OVA inventory watcher detects files changes, including deleted files. Updates from the <literal>ova-provider-server</literal> pod are now sent every five minutes to the <literal>forklift-controller</literal> pod that updates the inventory. <link xlink:href="https://issues.redhat.com/browse/MTV-733">(MTV-733)</link></para>
</formalpara>
<formalpara>
<title>Unclear error message when Forklift fails to build or create a PVC</title>
<para>In earlier releases of MTV, the error logs lacked clear information to identify the reason for a failure to create a PV on a destination storage class that does not have a configured storage profile. This issue was resolved in MTV 2.6.0. <link xlink:href="https://issues.redhat.com/browse/MTV-928">(MTV-928)</link></para>
</formalpara>
<formalpara>
<title>Plans stay indefinitely in the <literal>CopyDisks</literal> phase when there is an outdated ovirtvolumepopulator</title>
<para>In earlier releases of MTV, an earlier failed migration could have left an outdated <literal>ovirtvolumepopulator</literal>. When starting a new plan for the same VM to the same project,  the <literal>CreateDataVolumes</literal> phase did not create populator PVCs when transitioning to <literal>CopyDisks</literal>, causing the <literal>CopyDisks</literal> phase to stay indefinitely. This issue was resolved in MTV 2.6.0. <link xlink:href="https://issues.redhat.com/browse/MTV-929">(MTV-929)</link></para>
</formalpara>
<simpara>For a complete list of all resolved issues in this release, see the list of <link xlink:href="https://issues.redhat.com/issues/?filter=12436210">Resolved Issues</link> in Jira.</simpara>
</section>
</section>
<section xml:id="known-issues-26_release-notes">
<title>Known issues</title>
<simpara>This release has the following known issues:</simpara>
<formalpara>
<title>Disks and drives are offline after migrating Windows virtual machines from RHV or VMware to OCP</title>
<para>Windows (Windows 2022) VMs configured with multiple disks, which are <emphasis role="strong">Online</emphasis> before the migration, are <emphasis role="strong">Offline</emphasis> after a successful migration from RHV or VMware to Red Hat OpenShift, using MTV. Only the <literal>C:\</literal> primary disk is <emphasis role="strong">Online</emphasis>. <link xlink:href="https://issues.redhat.com/browse/MTV-1299">(MTV-1299)</link></para>
</formalpara>
<simpara>Workaround: Before initiating the migration, from the source provider using MTV, set the SAN policy to <literal>SAN POLICY=OnlineAll</literal>.</simpara>
<simpara>To do this:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Open a Command Prompt or PowerShell session.</simpara>
</listitem>
<listitem>
<simpara>Open the disk partition tool:</simpara>
<programlisting language="terminal" linenumbering="unnumbered">C:&gt; diskpart</programlisting>
</listitem>
<listitem>
<simpara>Check that the SAN policy is set to <literal>Offline Shared</literal>:</simpara>
<programlisting language="terminal" linenumbering="unnumbered">DISKPART&gt; SAN</programlisting>
<simpara>Expected output:</simpara>
<programlisting language="terminal" linenumbering="unnumbered">SAN Policy : Offline Shared</programlisting>
</listitem>
<listitem>
<simpara>Change the policy to OnlineAll:</simpara>
<programlisting language="terminal" linenumbering="unnumbered">DISKPART&gt; SAN POLICY=OnlineAll</programlisting>
</listitem>
<listitem>
<simpara>Start the migration from OpenShift, using MTV.</simpara>
</listitem>
</orderedlist>
<simpara>Upon completion of the migration, log into the VM and check the Disk status in the Disk Management utility.</simpara>
<formalpara>
<title>Unclear error status message for VM with no operating system</title>
<para>The error status message for a VM with no operating system on the <emphasis role="strong">Plans</emphasis> page of the web console does not describe the reason for the failure. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2008846">(BZ#22008846)</link></para>
</formalpara>
<formalpara>
<title>Migration of virtual machines with encrypted partitions fails during a conversion (vSphere only)</title>
<para>vSphere only: Migrations from RHV and OpenStack do not fail, but the encryption key might be missing on the target Red Hat OpenShift cluster.</para>
</formalpara>
<formalpara>
<title>Migration fails during precopy/cutover while performing a snapshot operation on the source VM</title>
<para>Warm migration from RHV fails if a snapshot operation is triggered and running on the source VM at the same time as the migration is scheduled. The migration does not wait for the snapshot operation to finish. <link xlink:href="https://issues.redhat.com/browse/MTV-456">(MTV-456)</link></para>
</formalpara>
<formalpara>
<title>Unable to schedule migrated VM with multiple disks to more than one storage class of type <literal>hostPath</literal></title>
<para>When migrating a VM with multiple disks to more than one storage class of type <literal>hostPath</literal>, it might happen that a VM cannot be scheduled. Workaround: Use shared storage on the target Red Hat OpenShift cluster.</para>
</formalpara>
<formalpara>
<title>Non-supported guest operating systems in warm migrations</title>
<para>Warm migrations and migrations to remote Red Hat OpenShift clusters from vSphere do not support the same guest operating systems that are supported in cold migrations and migrations to the local Red Hat OpenShift cluster. RHEL 8 and RHEL 9 might cause this limitation.</para>
</formalpara>
<simpara>See <link xlink:href="https://access.redhat.com/articles/1351473">Converting virtual machines from other hypervisors to KVM with virt-v2v in RHEL 7, RHEL 8, and RHEL 9</link> for the list of supported guest operating systems.</simpara>
<formalpara>
<title>VMs from vSphere with RHEL 9 guest operating system can start with network interfaces that are down</title>
<para>When migrating VMs that are installed with RHEL 9 as a guest operating system from vSphere, the network interfaces of the VMs could be disabled when they start in OpenShift Virtualization. <link xlink:href="https://issues.redhat.com/browse/MTV-491">(MTV-491)</link></para>
</formalpara>
<formalpara>
<title>Migration of a VM with NVME disks from vSphere fails</title>
<para>When migrating a virtual machine (VM) with NVME disks from vSphere, the migration process fails, and the Web Console shows that the <literal>Convert image to kubevirt</literal> stage is <literal>running</literal> but did not finish successfully. <link xlink:href="https://issues.redhat.com/browse/MTV-963">(MTV-963)</link></para>
</formalpara>
<formalpara>
<title>Importing image-based VMs can fail</title>
<para>Migrating an image-based VM without the <literal>virtual_size</literal> field can fail on a block mode storage class. <link xlink:href="https://issues.redhat.com/browse/MTV-946">(MTV-946)</link></para>
</formalpara>
<formalpara>
<title>Deleting a migration plan does not remove temporary resources</title>
<para>Deleting a migration plan does not remove temporary resources such as importer pods, conversion pods, config maps, secrets, failed VMs, and data volumes. You must archive a migration plan before deleting it to clean up the temporary resources. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2018974">(BZ#2018974)</link></para>
</formalpara>
<formalpara>
<title>Migrating VMs with independent persistent disks from VMware to OCP-V fails</title>
<para>Migrating VMs with independent persistent disks from VMware to OCP-V fails. <link xlink:href="https://issues.redhat.com/browse/MTV-993">(MTV-993)</link></para>
</formalpara>
<formalpara>
<title>Guest operating system from vSphere might be missing</title>
<para>When vSphere does not receive updates about the guest operating system from the VMware tools, it considers the information about the guest operating system to be outdated and ceases to report it. When this occurs, MTV is unaware of the guest operating system of the VM and is unable to associate it with the appropriate virtual machine preference or OpenShift template. <link xlink:href="https://issues.redhat.com/browse/MTV-1046">(MTV-1046)</link></para>
</formalpara>
<formalpara>
<title>Failure to migrate an image-based VM from OpenStack to the <literal>default</literal> project</title>
<para>The migration process fails when migrating an image-based VM from OpenStack to the <literal>default</literal> project. <link xlink:href="https://issues.redhat.com/browse/MTV-964">(MTV-964)</link></para>
</formalpara>
<simpara>For a complete list of all known issues in this release, see the list of <link xlink:href="https://issues.redhat.com/issues/?filter=12436209">Known Issues</link> in Jira.</simpara>
</section>
</chapter>
<chapter xml:id="rn-2.5_release-notes">
<title>Migration Toolkit for Virtualization 2.5</title>
<simpara>You can use the Migration Toolkit for Virtualization (MTV) to migrate virtual machines from the following source providers to OpenShift Virtualization destination providers:</simpara>
<itemizedlist>
<listitem>
<simpara>VMware vSphere</simpara>
</listitem>
<listitem>
<simpara>Red Hat Virtualization (RHV)</simpara>
</listitem>
<listitem>
<simpara>OpenStack</simpara>
</listitem>
<listitem>
<simpara>Open Virtual Appliances (OVAs) that were created by VMware vSphere</simpara>
</listitem>
<listitem>
<simpara>Remote OpenShift Virtualization clusters</simpara>
</listitem>
</itemizedlist>
<simpara>The release notes describe technical changes, new features and enhancements, and known issues for Migration Toolkit for Virtualization.</simpara>
<section xml:id="technical-changes-25_release-notes">
<title>Technical changes</title>
<simpara>This release has the following technical changes:</simpara>
<formalpara>
<title>Migration from OpenStack moves to being a fully supported feature</title>
<para>In this version of MTV, migration using OpenStack source providers graduated from a Technology Preview feature to a fully supported feature.</para>
</formalpara>
<formalpara>
<title>Disabling FIPS</title>
<para>MTV enables migrations from vSphere source providers by not enforcing Enterprise Master Secret (EMS). This enables migrating from all vSphere versions that MTV supports, including migrations that do not meet 2023 FIPS requirements.</para>
</formalpara>
<formalpara>
<title>Integration of the create and update provider user interface</title>
<para>The user interface of the create and update providers now aligns with the look and feel of the Red Hat OpenShift web console and displays up-to-date data.</para>
</formalpara>
<formalpara>
<title>Standalone UI</title>
<para>The old UI of MTV 2.3 cannot be enabled by setting <literal>feature_ui: true</literal> in ForkliftController anymore.</para>
</formalpara>
<formalpara>
<title>Support deployment on OpenShift 4.15</title>
<para>MTV 2.5.6 can be deployed on OpenShift 4.15 clusters.</para>
</formalpara>
</section>
<section xml:id="new-features-and-enhancements-25_release-notes">
<title>New features and enhancements</title>
<simpara>This release has the following features and improvements:</simpara>
<formalpara>
<title>Migration of OVA files from VMware vSphere</title>
<para>In MTV 2.6, you can migrate using Open Virtual Appliance (OVA) files that were created by VMware vSphere as source providers. <link xlink:href="https://issues.redhat.com/browse/MTV-336">(MTV-336)</link></para>
</formalpara>
<note>
<simpara>Migration of OVA files that were not created by VMware vSphere but are compatible with vSphere might succeed. However, migration of such files is not supported by MTV. MTV supports only OVA files created by VMware vSphere.</simpara>
</note>
<simpara>Migration using one or more Open Virtual Appliance (OVA) files as a source provider is a Technology Preview.</simpara>
<important>
<simpara>Migration using one or more Open Virtual Appliance (OVA) files as a source provider is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product
features, enabling customers to test functionality and provide feedback during the development process.</simpara>
<simpara>For more information about the support scope of Red Hat Technology Preview
features, see <link xlink:href="https://access.redhat.com/support/offerings/techpreview/">https://access.redhat.com/support/offerings/techpreview/</link>.</simpara>
</important>
<formalpara>
<title>Migrating VMs between Red Hat OpenShift clusters</title>
<para>In MTV 2.6, you can now use Red Hat OpenShift Virtualization provider as a source provider and a destination provider. You can migrate VMs from the cluster that MTV is deployed on to another cluster, or from a remote cluster to the cluster that MTV is deployed on. <link xlink:href="https://issues.redhat.com/browse/MTV-571">(MTV-571)</link></para>
</formalpara>
<formalpara>
<title>Migration of VMs with direct LUNs from RHV</title>
<para>During the migration from Red Hat Virtualization (RHV), direct Logical Units (LUNs) are detached from the source virtual machines and attached to the target virtual machines. Note that this mechanism does not work yet for Fibre Channel. <link xlink:href="https://issues.redhat.com/browse/MTV-329">(MTV-329)</link></para>
</formalpara>
<formalpara>
<title>Additional authentication methods for OpenStack</title>
<para>In addition to standard password authentication, MTV supports the following authentication methods: Token authentication and Application credential authentication. <link xlink:href="https://issues.redhat.com/browse/MTV-539">(MTV-539)</link></para>
</formalpara>
<formalpara>
<title>Validation rules for OpenStack</title>
<para>The validation service includes default validation rules for virtual machines from OpenStack. <link xlink:href="https://issues.redhat.com/browse/MTV-508">(MTV-508)</link></para>
</formalpara>
<formalpara>
<title>VDDK is now optional for VMware vSphere providers</title>
<para>You can now create the VMware vSphere source provider without specifying a VMware Virtual Disk Development Kit (VDDK) <literal>init</literal> image. It is strongly recommended you create a VDDK <literal>init</literal> image to accelerate migrations.</para>
</formalpara>
<formalpara>
<title>Deployment on OKE enabled</title>
<para>In MTV 2.5.3, deployment on OpenShift Kubernetes Engine (OKE) has been enabled. For more information, see <link xlink:href="https://docs.openshift.com/container-platform/4.15/welcome/oke_about.html">About OpenShift Kubernetes Engine</link>. <link xlink:href="https://issues.redhat.com/browse/MTV-803">(MTV-803)</link></para>
</formalpara>
<formalpara>
<title>Migration of VMs to destination storage classes with encrypted RBD now supported</title>
<para>In MTV 2.5.4, migration of VMs to destination storage classes that have encrypted RADOS Block Devices (RBD) volumes is now supported.</para>
</formalpara>
<simpara>To make use of this new feature, set the value of the parameter <literal>controller_block_overhead</literal> to <literal>1Gi</literal>, following the procedure in <link xlink:href="https://access.redhat.com/documentation/en-us/migration_toolkit_for_virtualization/2.5/html-single/installing_and_using_the_migration_toolkit_for_virtualization/index#configuring-mtv-operator_mtv">Configuring the MTV Operator</link>. <link xlink:href="https://issues.redhat.com/browse/MTV-851">(MTV-851)</link></simpara>
</section>
<section xml:id="known-issues-25_release-notes">
<title>Known issues</title>
<simpara>This release has the following known issues:</simpara>
<formalpara>
<title>Deleting migration plan does not remove temporary resources</title>
<para>Deleting a migration plan does not remove temporary resources such as importer pods, conversion pods, config maps, secrets, failed VMs and data volumes. You must archive a migration plan before deleting it to clean up the temporary resources. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2018974">(BZ#2018974)</link></para>
</formalpara>
<formalpara>
<title>Unclear error status message for VM with no operating system</title>
<para>The error status message for a VM with no operating system on the <emphasis role="strong">Plans</emphasis> page of the web console does not describe the reason for the failure. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2008846">(BZ#22008846)</link></para>
</formalpara>
<formalpara>
<title>Migration of virtual machines with encrypted partitions fails during conversion</title>
<para>vSphere only: Migrations from RHV and OpenStack do not fail, but the encryption key may be missing on the target Red Hat OpenShift cluster.</para>
</formalpara>
<formalpara>
<title>Migration fails during precopy/cutover while performing a snapshot operation on the source VM</title>
<para>Warm migration from RHV fails if a snapshot operation is triggered and running on the source VM at the same time as the migration is scheduled. The migration does not wait for the snapshot operation to finish. <link xlink:href="https://issues.redhat.com/browse/MTV-456">(MTV-456)</link></para>
</formalpara>
<formalpara>
<title>Unable to schedule migrated VM with multiple disks to more than one storage classes of type hostPath</title>
<para>When migrating a VM with multiple disks to more than one storage classes of type <literal>hostPath</literal>, it might happen that a VM cannot be scheduled. Workaround: Use shared storage on the target Red Hat OpenShift cluster.</para>
</formalpara>
<formalpara>
<title>Non-supported guest operating systems in warm migrations</title>
<para>Warm migrations and migrations to remote Red Hat OpenShift clusters from vSphere do not support all types of guest operating systems that are supported in cold migrations to the local Red Hat OpenShift cluster. This is a consequence of using RHEL 8 in the former case and RHEL 9 in the latter case.<?asciidoc-br?>
See <link xlink:href="https://access.redhat.com/articles/1351473">Converting virtual machines from other hypervisors to KVM with virt-v2v in RHEL 7, RHEL 8, and RHEL 9</link> for the list of supported guest operating systems.</para>
</formalpara>
<formalpara>
<title>VMs from vSphere with RHEL 9 guest operating system can start with network interfaces that are down</title>
<para>When migrating VMs that are installed with RHEL 9 as guest operating system from vSphere, the network interfaces of the VMs could be disabled when they start in OpenShift Virtualization. <link xlink:href="https://issues.redhat.com/browse/MTV-491">(MTV-491)</link></para>
</formalpara>
<formalpara>
<title>Import OVA: ConnectionTestFailed message appears when adding OVA provider</title>
<para>When adding an OVA provider, the error message <literal>ConnectionTestFailed</literal> can appear, although the provider is created successfully. If the message does not disappear after a few minutes and the provider status does not move to <literal>Ready</literal>, this means that the <literal>ova server pod creation</literal> has failed. <link xlink:href="https://issues.redhat.com/browse/MTV-671">(MTV-671)</link></para>
</formalpara>
<formalpara>
<title>Left over <literal>ovirtvolumepopulator</literal> from failed migration causes plan to stay indefinitely in <literal>CopyDisks</literal> phase</title>
<para>An outdated <literal>ovirtvolumepopulator</literal> in the namespace, left over from an earlier failed migration, stops a new plan of the same VM when it transitions to <literal>CopyDisks</literal> phase. The plan remains in that phase indefinitely. <link xlink:href="https://issues.redhat.com/browse/MTV-929">(MTV-929)</link></para>
</formalpara>
<formalpara>
<title>Unclear error message when Forklift fails to build a PVC</title>
<para>The migration fails to build the Persistent Volume Claim (PVC) if the destination storage class does not have a configured storage profile. The <literal>forklift-controller</literal> raises an error message without a clear reason for failing to create a PVC. <link xlink:href="https://issues.redhat.com/browse/MTV-928">(MTV-928)</link></para>
</formalpara>
<simpara>For a complete list of all known issues in this release, see the list of <link xlink:href="https://issues.redhat.com/issues/?filter=12430968">Known Issues</link> in Jira.</simpara>
</section>
<section xml:id="resolved-issues-25_release-notes">
<title>Resolved issues</title>
<simpara>This release has the following resolved issues:</simpara>
<formalpara>
<title>Flaw was found in jsrsasign package which is vulnerable to Observable Discrepancy</title>
<para>Versions of the package <literal>jsrsasign</literal> before 11.0.0, used in earlier releases of MTV, are vulnerable to Observable Discrepancy in the RSA PKCS1.5 or RSA-OAEP decryption process. This discrepancy means an attacker could decrypt ciphertexts by exploiting this vulnerability. However, exploiting this vulnerability requires the attacker to have access to a large number of ciphertexts encrypted with the same key. This issue has been resolved in MTV 2.5.5 by upgrading the package <literal>jsrasign</literal> to version 11.0.0.</para>
</formalpara>
<simpara>For more information, see <link xlink:href="https://access.redhat.com/security/cve/CVE-2024-21484">CVE-2024-21484</link>.</simpara>
<formalpara>
<title>Multiple HTTP/2 enabled web servers are vulnerable to a DDoS attack (Rapid Reset Attack)</title>
<para>A flaw was found in handling multiplexed streams in the HTTP/2 protocol. In previous releases of MTV, the HTTP/2 protocol allowed a denial of service (server resource consumption) because request cancellation could reset multiple streams quickly. The server had to set up and tear down the streams while not hitting any server-side limit for the maximum number of active streams per connection, which resulted in a denial of service due to server resource consumption.</para>
</formalpara>
<simpara>This issue has been resolved in MTV 2.5.2. It is advised to update to this version of MTV or later.</simpara>
<simpara>For more information, see <link xlink:href="https://access.redhat.com/security/cve/cve-2023-44487">CVE-2023-44487 (Rapid Reset Attack)</link> and <link xlink:href="https://access.redhat.com/security/cve/cve-2023-39325">CVE-2023-39325 (Rapid Reset Attack)</link>.</simpara>
<formalpara>
<title>Gin Web Framework does not properly sanitize filename parameter of <literal>Context.FileAttachment</literal> function</title>
<para>A flaw was found in the Gin-Gonic Gin Web Framework, used by MTV. The filename parameter of the <literal>Context.FileAttachment</literal> function was not properly sanitized. This flaw in the package could allow a remote attacker to bypass security restrictions caused by improper input validation by the filename parameter of the <literal>Context.FileAttachment</literal> function. A maliciously created filename could cause the <literal>Content-Disposition</literal> header to be sent with an unexpected filename value, or otherwise modify the <literal>Content-Disposition</literal> header.</para>
</formalpara>
<simpara>This issue has been resolved in MTV 2.5.2. It is advised to update to this version of MTV or later.</simpara>
<simpara>For more information, see <link xlink:href="https://access.redhat.com/security/cve/cve-2023-29401">CVE-2023-29401 (Gin-Gonic Gin Web Framework)</link> and <link xlink:href="https://access.redhat.com/security/cve/CVE-2023-26125">CVE-2023-26125</link>.</simpara>
<formalpara>
<title>CVE-2023-26144: mtv-console-plugin-container: graphql: Insufficient checks in the OverlappingFieldsCanBeMergedRule.ts</title>
<para>A flaw was found in the package GraphQL from 16.3.0 and before 16.8.1. This flaw means MTV  versions before MTV 2.5.2 are vulnerable to Denial of Service (DoS) due to insufficient checks in the <literal>OverlappingFieldsCanBeMergedRule.ts</literal> file when parsing large queries. This issue may allow an attacker to degrade system performance. <link xlink:href="https://issues.redhat.com/browse/MTV-712">(MTV-712)</link></para>
</formalpara>
<simpara>This issue has been resolved in MTV 2.5.2. It is advised to update to this version of MTV or later.</simpara>
<simpara>For more information, see <link xlink:href="https://access.redhat.com/security/cve/CVE-2023-26144">CVE-2023-26144</link>.</simpara>
<formalpara>
<title>CVE-2023-45142: Memory leak found in the otelhttp handler of open-telemetry</title>
<para>A flaw was found in <literal>otelhttp handler</literal> of OpenTelemetry-Go. This flaw means MTV versions before MTV 2.5.3 are vulnerable to a memory leak caused by <literal>http.user_agent</literal> and <literal>http.method</literal> having unbound cardinality, which could allow a remote, unauthenticated attacker to exhaust the server’s memory by sending many malicious requests, affecting the availability. <link xlink:href="https://issues.redhat.com/browse/MTV-795">(MTV-795)</link></para>
</formalpara>
<simpara>This issue has been resolved in MTV 2.5.3. It is advised to update to this version of MTV or later.</simpara>
<simpara>For more information, see <link xlink:href="https://access.redhat.com/security/cve/CVE-2023-45142">CVE-2023-45142</link>.</simpara>
<formalpara>
<title>CVE-2023-39322: QUIC connections do not set an upper bound on the amount of data buffered when reading post-handshake messages</title>
<para>A flaw was found in Golang. This flaw means MTV versions before MTV 2.5.3 are vulnerable to QUIC connections not setting an upper bound on the amount of data buffered when reading post-handshake messages, allowing a malicious QUIC connection to cause unbounded memory growth. With the fix, connections now consistently reject messages larger than 65KiB in size. <link xlink:href="https://issues.redhat.com/browse/MTV-708">(MTV-708)</link></para>
</formalpara>
<simpara>This issue has been resolved in MTV 2.5.3. It is advised to update to this version of MTV or later.</simpara>
<simpara>For more information, see <link xlink:href="https://access.redhat.com/security/cve/CVE-2023-39322">CVE-2023-39322</link>.</simpara>
<formalpara>
<title>CVE-2023-39321: Processing an incomplete post-handshake message for a QUIC connection can cause a panic</title>
<para>A flaw was found in Golang. This flaw means MTV versions before MTV 2.5.3 are vulnerable to processing an incomplete post-handshake message for a QUIC connection, which causes a panic. <link xlink:href="https://issues.redhat.com/browse/MTV-693">(MTV-693)</link></para>
</formalpara>
<simpara>This issue has been resolved in MTV 2.5.3. It is advised to update to this version of MTV or later.</simpara>
<simpara>For more information, see <link xlink:href="https://access.redhat.com/security/cve/CVE-2023-39321">CVE-2023-39321</link>.</simpara>
<formalpara>
<title>CVE-2023-39319: Flaw in html/template package</title>
<para>A flaw was found in the Golang <literal>html/template</literal> package used in MTV. This flaw means MTV versions before MTV 2.5.3 are vulnerable, as the <literal>html/template</literal> package did not properly handle occurrences of <literal>&lt;script</literal>, <literal>&lt;!--</literal>, and <literal>&lt;/script</literal> within JavaScript literals in <literal>&lt;script&gt;</literal> contexts. This flaw could cause the template parser to improperly consider script contexts to be terminated early, causing actions to be improperly escaped, which could be leveraged to perform an <literal>XSS</literal> attack. <link xlink:href="https://issues.redhat.com/browse/MTV-693">(MTV-693)</link></para>
</formalpara>
<simpara>This issue has been resolved in MTV 2.5.3. It is advised to update to this version of MTV or later.</simpara>
<simpara>For more information, see <link xlink:href="https://access.redhat.com/security/cve/CVE-2023-39319">CVE-2023-39319</link>.</simpara>
<formalpara>
<title>CVE-2023-39318: Flaw in html/template package</title>
<para>A flaw was found in the Golang <literal>html/template</literal> package used in MTV. This flaw means MTV versions before MTV 2.5.3 are vulnerable as the <literal>html/template</literal> package did not properly handle HMTL-like <literal>""</literal> comment tokens, nor hashbang <literal>\#!</literal> comment tokens. This flaw could cause the template parser to improperly interpret the contents of <literal>&lt;script&gt;</literal> contexts, causing actions to be improperly escaped, which could be leveraged to perform an <literal>XSS</literal> attack. <link xlink:href="https://issues.redhat.com/browse/MTV-693">(MTV-693)</link></para>
</formalpara>
<simpara>This issue has been resolved in MTV 2.5.3. It is advised to update to this version of MTV or later.</simpara>
<simpara>For more information, see <link xlink:href="https://access.redhat.com/security/cve/CVE-2023-39318">CVE-2023-39318</link>.</simpara>
<formalpara>
<title>Logs archive file downloaded from UI includes logs related to deleted migration plan/VM</title>
<para>In earlier releases of MTV 2.6, the log files downloaded from UI could contain logs that are related to an earlier migration plan. <link xlink:href="https://issues.redhat.com/browse/MTV-783">(MTV-783)</link></para>
</formalpara>
<simpara>This issue has been resolved in MTV 2.5.3.</simpara>
<formalpara>
<title>Extending a VM disk in RHV is not reflected in the MTV inventory</title>
<para>In earlier releases of MTV 2.6, the size of disks that are extended in RHV was not adequately monitored. This resulted in the inability to migrate virtual machines with extended disks from a RHV provider. <link xlink:href="https://issues.redhat.com/browse/MTV-830">(MTV-830)</link></para>
</formalpara>
<simpara>This issue has been resolved in MTV 2.5.3.</simpara>
<formalpara>
<title>Filesystem overhead configurable</title>
<para>In earlier releases of MTV 2.6, the filesystem overhead for new persistent volumes was hard-coded to 10%. The overhead was insufficient for certain filesystem types, resulting in failures during cold-migrations from RHV and OSP to the cluster where MTV is deployed. In other filesystem types, the hard-coded overhead was too high, resulting in excessive storage consumption.</para>
</formalpara>
<simpara>In MTV 2.5.3, the filesystem overhead can be configured, as it is no longer hard-coded. If your migration allocates persistent volumes without CDI, you can adjust the file system overhead. You adjust the file system overhead by adding the following label and value to the <literal>spec</literal> portion of the <literal>forklift-controller</literal> CR:</simpara>
<programlisting language="YAML" linenumbering="unnumbered">spec:
  `controller_filesystem_overhead: &lt;percentage&gt;` <co xml:id="CO1-1"/></programlisting>
<calloutlist>
<callout arearefs="CO1-1">
<para>The percentage of overhead. If this label is not added, the default value of 10% is used. This setting is valid only if the <literal>storageclass</literal> is <literal>filesystem</literal>. <link xlink:href="https://issues.redhat.com/browse/MTV-699">(MTV-699)</link></para>
</callout>
</calloutlist>
<formalpara>
<title>Ensure up-to-date data is displayed in the create and update provider forms</title>
<para>In earlier releases of MTV, the create and update provider forms could have presented stale data.</para>
</formalpara>
<simpara>This issue is resolved in MTV 2.6, the new forms of create and update provider display up-to-date properties of the provider. <link xlink:href="https://issues.redhat.com/browse/MTV-603">(MTV-603)</link></simpara>
<formalpara>
<title>Snapshots that are created during a migration in OpenStack are not deleted</title>
<para>In earlier releases of MTV, the <literal>Migration Controller</literal> service did not delete snapshots that were created during a migration of source virtual machines in OpenStack automatically.</para>
</formalpara>
<simpara>This issue is resolved in MTV 2.6, all the snapshots created during the migration are removed after the migration has been completed. <link xlink:href="https://issues.redhat.com/browse/MTV-620">(MTV-620)</link></simpara>
<formalpara>
<title>RHV snapshots are not deleted after a successful migration</title>
<para>In earlier releases of MTV, the <literal>Migration Controller</literal> service did not delete snapshots automatically after a successful warm migration of a VM from RHV.</para>
</formalpara>
<simpara>This issue is resolved in MTV 2.6, the snapshots generated during migration are removed after a successful migration, and the original snapshots are not removed after a successful migration. <link xlink:href="https://issues.redhat.com/browse/MTV-349">(MTV-349)</link></simpara>
<formalpara>
<title>Warm migration fails when cutover conflicts with precopy</title>
<para>In earlier releases of MTV, the cutover operation failed when it was triggered while precopy was being performed. The VM was locked in RHV and therefore the <literal>ovirt-engine</literal> rejected the snapshot creation, or disk transfer, operation.</para>
</formalpara>
<simpara>This issue is resolved in MTV 2.6, the cutover operation is triggered, but it is not performed at that time because the VM is locked. Once the precopy operation completes, the cutover operation is triggered. <link xlink:href="https://issues.redhat.com/browse/MTV-686">(MTV-686)</link></simpara>
<formalpara>
<title>Warm migration fails when VM is locked</title>
<para>In earlier releases of MTV, triggering a warm migration while there was an ongoing operation in RHV that locked the VM caused the migration to fail because it could not trigger the snapshot creation.</para>
</formalpara>
<simpara>This issue is resolved in MTV 2.6, warm migration does not fail when an operation that locks the VM is performed in RHV. The migration does not fail, but starts when the VM is unlocked. <link xlink:href="https://issues.redhat.com/browse/MTV-687">(MTV-687)</link></simpara>
<formalpara>
<title>Deleting migrated VM does not remove PVC and PV</title>
<para>In earlier releases of MTV, when removing a VM that was migrated, its persistent volume claims (PVCs) and physical volumes (PV) were not deleted.</para>
</formalpara>
<simpara>This issue is resolved in MTV 2.6, PVCs and PVs are deleted when deleting migrated VM.<link xlink:href="https://issues.redhat.com/browse/MTV-492">(MTV-492)</link></simpara>
<formalpara>
<title>PVC deletion hangs after archiving and deleting migration plan</title>
<para>In earlier releases of MTV, when a migration failed, its PVCs and PVs were not deleted as expected when its migration plan was archived and deleted.</para>
</formalpara>
<simpara>This issue is resolved in MTV 2.6, PVCs are deleted when archiving and deleting migration plan.<link xlink:href="https://issues.redhat.com/browse/MTV-493">(MTV-493)</link></simpara>
<formalpara>
<title>VM with multiple disks can boot from a non-bootable disk after migration</title>
<para>In earlier releases of MTV, VM with multiple disks that were migrated might not have been able to boot on the target Red Hat OpenShift cluster.</para>
</formalpara>
<simpara>This issue is resolved in MTV 2.6, VM with multiple disks that are migrated can boot on the target Red Hat OpenShift cluster. <link xlink:href="https://issues.redhat.com/browse/MTV-433">(MTV-433)</link></simpara>
<formalpara>
<title>Transfer network not taken into account for cold migrations from vSphere</title>
<para>In MTV releases 2.4.0-2.5.3, cold migrations from vSphere to the local cluster on which MTV was deployed did not take a specified transfer network into account. This issue is resolved in  MTV 2.5.4.  <link xlink:href="https://issues.redhat.com/browse/MTV-846">(MTV-846)</link></para>
</formalpara>
<formalpara>
<title>Fix migration of VMs with multi-boot guest operating system from vSphere</title>
<para>In MTV 2.5.6, the virt-v2v arguments include <literal>–root first</literal>, which mitigates an issue with multi-boot VMs where the pod fails. This is a fix for a regression that was introduced in MTV 2.4, in which the <emphasis>--root</emphasis> argument was dropped. <link xlink:href="https://issues.redhat.com/browse/MTV-987">(MTV-987)</link></para>
</formalpara>
<formalpara>
<title>Errors logged in populator pods are improved</title>
<para>In earlier releases of MTV 2.6, populator pods were always restarted on failure. This made it difficult to gather the logs from the failed pods. In MTV 2.5.3, the number of restarts of populator pods is limited to three times. On the third and final time, the populator pod remains in the fail status and its logs can then be easily gathered by <literal>must-gather</literal> and by <literal>forklift-controller</literal> to know this step has failed. <link xlink:href="https://issues.redhat.com/browse/MTV-818">(MTV-818)</link></para>
</formalpara>
<formalpara>
<title>npm IP package vulnerability</title>
<para>A vulnerability found in the Node.js Package Manager (npm) IP Package can allow an attacker to obtain sensitive information and obtain access to normally inaccessible resources. <link xlink:href="https://issues.redhat.com/browse/MTV-941">MTV-941</link></para>
</formalpara>
<simpara>This issue has been resolved in MTV 2.5.6.</simpara>
<simpara>For more information, see <link xlink:href="https://access.redhat.com/security/cve/cve-2023-42282">CVE-2023-42282</link></simpara>
<formalpara>
<title>Flaw was found in the Golang net/http/internal package</title>
<para>A flaw was found in the versions of the Golang <literal>net/http/internal</literal> package, that were used in earlier releases of MTV. This flaw could allow a malicious user to send an HTTP request and cause the receiver to read more bytes from the network than are in the body (up to 1GiB), causing the receiver to fail reading the response, possibly leading to a Denial of Service (DoS). This issue has been resolved in MTV 2.5.6.</para>
</formalpara>
<simpara>For more information, see <link xlink:href="https://access.redhat.com/security/cve/cve-2023-39326">CVE-2023-39326</link>.</simpara>
<simpara>For a complete list of all resolved issues in this release, see the list of <link xlink:href="https://issues.redhat.com/issues/?filter=12431371">Resolved Issues</link> in Jira.</simpara>
</section>
<section xml:id="upgrade-notes-25_release-notes">
<title>Upgrade notes</title>
<simpara>It is recommended to upgrade from MTV 2.4.2 to MTV 2.6.</simpara>
<formalpara>
<title>Upgrade from 2.4.0 fails</title>
<para>When upgrading from MTV 2.4.0 to a later version, the operation fails with an error that says the field <emphasis>spec.selector</emphasis> of deployment <literal>forklift-controller</literal> is immutable. Workaround: Remove the custom resource <literal>forklift-controller</literal> of type <literal>ForkliftController</literal> from the installed namespace, and recreate it. Refresh the Red Hat OpenShift console once the <literal>forklift-console-plugin</literal> pod runs to load the upgraded MTV web console. <link xlink:href="https://issues.redhat.com/browse/MTV-518">(MTV-518)</link></para>
</formalpara>
</section>
</chapter>
<chapter xml:id="rn-24_release-notes">
<title>Migration Toolkit for Virtualization 2.4</title>
<simpara>Migrate virtual machines (VMs) from VMware vSphere or Red Hat Virtualization or OpenStack to OpenShift Virtualization with the Migration Toolkit for Virtualization (MTV).</simpara>
<simpara>The release notes describe technical changes, new features and enhancements, and known issues.</simpara>
<section xml:id="technical-changes-24_release-notes">
<title>Technical changes</title>
<simpara>This release has the following technical changes:</simpara>
<formalpara>
<title>Faster disk image migration from RHV</title>
<para>Disk images are not converted anymore using virt-v2v when migrating from RHV. This change speeds up migrations and also allows migration for guest operating systems that are not supported by virt-vsv. <link xlink:href="https://github.com/kubev2v/forklift-controller/issues/403">(forklift-controller#403)</link></para>
</formalpara>
<formalpara>
<title>Faster disk transfers by ovirt-imageio client (ovirt-img)</title>
<para>Disk transfers use <literal>ovirt-imageio</literal> client (ovirt-img) instead of Containerized Data Import (CDI) when migrating from RHV to the local OpenShift Container Platform cluster, accelerating the migration.</para>
</formalpara>
<formalpara>
<title>Faster migration using conversion pod disk transfer</title>
<para>When migrating from vSphere to the local OpenShift Container Platform cluster, the conversion pod transfers the disk data instead of Containerized Data Importer (CDI), accelerating the migration.</para>
</formalpara>
<formalpara>
<title>Migrated virtual machines are not scheduled on the target OCP cluster</title>
<para>The migrated virtual machines are no longer scheduled on the target OpenShift Container Platform cluster. This enables migrating VMs that cannot start due to limit constraints on the target at migration time.</para>
</formalpara>
<formalpara>
<title>StorageProfile resource needs to be updated for a non-provisioner storage class</title>
<para>You must update the <literal>StorageProfile</literal> resource with <literal>accessModes</literal> and <literal>volumeMode</literal> for non-provisioner storage classes such as NFS.</para>
</formalpara>
<formalpara>
<title>VDDK 8 can be used in the VDDK image</title>
<para>Previous versions of MTV supported only using VDDK version 7 for the VDDK image. MTV supports both versions 7 and 8, as follows:</para>
</formalpara>
<itemizedlist>
<listitem>
<simpara>If you are migrating to OCP 4.12 or earlier, use VDDK version 7.</simpara>
</listitem>
<listitem>
<simpara>If you are migrating to OCP 4.13 or later, use VDDK version 8.</simpara>
</listitem>
</itemizedlist>
</section>
<section xml:id="new-features-and-enhancements-24_release-notes">
<title>New features and enhancements</title>
<simpara>This release has the following features and improvements:</simpara>
<formalpara>
<title>OpenStack migration</title>
<para>MTV now supports migrations with OpenStack as a source provider. This feature is a provided as a Technology Preview and only supports cold migrations.</para>
</formalpara>
<formalpara>
<title>OCP console plugin</title>
<para>The Migration Toolkit for Virtualization Operator now integrates the MTV web console into the Red Hat OpenShift web console. The new UI operates as an OCP Console plugin that adds the sub-menu <literal>Migration</literal> to the navigation bar. It is implemented in version 2.4, disabling the old UI. You can enable the old UI by setting <literal>feature_ui: true</literal> in ForkliftController. <link xlink:href="https://issues.redhat.com/browse/MTV-427">(MTV-427)</link></para>
</formalpara>
<formalpara>
<title>Skip certification option</title>
<para><emphasis>Skip certificate validation</emphasis> option was added to VMware and RHV providers. If selected, the provider’s certificate will not be validated and the UI will not ask for specifying a CA certificate.</para>
</formalpara>
<formalpara>
<title>Only third-party certificate required</title>
<para>Only the third-party certificate needs to be specified when defining a RHV provider that sets with the Manager CA certificate.</para>
</formalpara>
<formalpara>
<title>Conversion of VMs with RHEL9 guest operating system</title>
<para>Cold migrations from vSphere to a local Red Hat OpenShift cluster use virt-v2v on RHEL 9. <link xlink:href="https://issues.redhat.com/browse/MTV-332">(MTV-332)</link></para>
</formalpara>
</section>
<section xml:id="known-issues-24_release-notes">
<title>Known issues</title>
<simpara>This release has the following known issues:</simpara>
<formalpara>
<title>Deleting migration plan does not remove temporary resources</title>
<para>Deleting a migration plan does not remove temporary resources such as importer pods, conversion pods, config maps, secrets, failed VMs and data volumes. You must archive a migration plan before deleting it to clean up the temporary resources. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2018974">(BZ#2018974)</link></para>
</formalpara>
<formalpara>
<title>Unclear error status message for VM with no operating system</title>
<para>The error status message for a VM with no operating system on the <emphasis role="strong">Plans</emphasis> page of the web console does not describe the reason for the failure. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2008846">(BZ#22008846)</link></para>
</formalpara>
<formalpara>
<title>Log archive file includes logs of a deleted migration plan or VM</title>
<para>If deleting a migration plan and then running a new migration plan with the same name, or if deleting a migrated VM and then remigrate the source VM, then the log archive file created by the MTV web console might include the logs of the deleted migration plan or VM. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2023764">(BZ#2023764)</link></para>
</formalpara>
<formalpara>
<title>Migration of virtual machines with encrypted partitions fails during conversion</title>
<para>vSphere only: Migrations from RHV and OpenStack don’t fail, but the encryption key may be missing on the target OCP cluster.</para>
</formalpara>
<formalpara>
<title>Snapshots that are created during the migration in OpenStack are not deleted</title>
<para>The Migration Controller service does not delete snapshots that are created during the migration for source virtual machines in OpenStack automatically. Workaround: the snapshots can be removed manually on OpenStack.</para>
</formalpara>
<formalpara>
<title>RHV snapshots are not deleted after a successful migration</title>
<para>The Migration Controller service does not delete snapshots automatically after a successful warm migration of a RHV VM. Workaround: Snapshots can be removed from RHV instead. <link xlink:href="https://issues.redhat.com/browse/MTV-349">(MTV-349)</link></para>
</formalpara>
<formalpara>
<title>Migration fails during precopy/cutover while a snapshot operation is executed on the source VM</title>
<para>Some warm migrations from RHV might fail. When running a migration plan for warm migration of multiple VMs from RHV, the migrations of some VMs might fail during the cutover stage. In that case, restart the migration plan and set the cutover time for the VM migrations that failed in the first run.</para>
</formalpara>
<simpara>Warm migration from RHV fails if a snapshot operation is performed on the source VM. If the user performs a snapshot operation on the source VM at the time when a migration snapshot is scheduled, the migration fails instead of waiting for the user’s snapshot operation to finish. <link xlink:href="https://issues.redhat.com/browse/MTV-456">(MTV-456)</link></simpara>
<formalpara>
<title>Cannot schedule migrated VM with multiple disks to more than one storage classes of type hostPath</title>
<para>When migrating a VM with multiple disks to more than one storage classes of type hostPath, it may result in a VM that cannot be scheduled. Workaround: It is recommended to use shared storage on the target OCP cluster.</para>
</formalpara>
<formalpara>
<title>Deleting migrated VM does not remove PVC and PV</title>
<para>When removing a VM that was migrated, its persistent volume claims (PVCs) and physical volumes (PV) are not deleted. Workaround: remove the CDI importer pods and then remove the remaining PVCs and PVs. <link xlink:href="https://issues.redhat.com/browse/MTV-492">(MTV-492)</link></para>
</formalpara>
<formalpara>
<title>PVC deletion hangs after archiving and deleting migration plan</title>
<para>When a migration fails, its PVCs and PVs are not deleted as expected when its migration plan is archived and deleted. Workaround: Remove the CDI importer pods and then remove the remaining PVCs and PVs. <link xlink:href="https://issues.redhat.com/browse/MTV-493">(MTV-493)</link></para>
</formalpara>
<formalpara>
<title>VM with multiple disks may boot from non-bootable disk after migration</title>
<para>VM with multiple disks that was migrated might not be able to boot on the target OCP cluster. Workaround: Set the boot order appropriately to boot from the bootable disk. <link xlink:href="https://issues.redhat.com/browse/MTV-433">(MTV-433)</link></para>
</formalpara>
<formalpara>
<title>Non-supported guest operating systems in warm migrations</title>
<para>Warm migrations and migrations to remote OCP clusters from vSphere do not support all types of guest operating systems that are supported in cold migrations to the local OCP cluster. It is a consequence of using RHEL 8 in the former case and RHEL 9 in the latter case.<?asciidoc-br?>
See <link xlink:href="https://access.redhat.com/articles/1351473">Converting virtual machines from other hypervisors to KVM with virt-v2v in RHEL 7, RHEL 8, and RHEL 9</link> for the list of supported guest operating systems.</para>
</formalpara>
<formalpara>
<title>VMs from vSphere with RHEL 9 guest operating system may start with network interfaces that are down</title>
<para>When migrating VMs that are installed with RHEL 9 as guest operating system from vSphere, their network interfaces could be disabled when they start in OpenShift Virtualization. <link xlink:href="https://issues.redhat.com/browse/MTV-491">(MTV-491)</link></para>
</formalpara>
<formalpara>
<title>Upgrade from 2.4.0 fails</title>
<para>When upgrading from MTV 2.4.0 to a later version, the operation fails with an error that says the field <emphasis>spec.selector</emphasis> of deployment <literal>forklift-controller</literal> is immutable. Workaround: remove the custom resource <literal>forklift-controller</literal> of type <literal>ForkliftController</literal> from the installed namespace, and recreate it. The user needs to refresh the OCP Console once the <literal>forklift-console-plugin</literal> pod runs to load the upgraded MTV web console. <link xlink:href="https://issues.redhat.com/browse/MTV-518">(MTV-518)</link></para>
</formalpara>
</section>
<section xml:id="resolved-issues-24_release-notes">
<title>Resolved issues</title>
<simpara>This release has the following resolved issues:</simpara>
<formalpara>
<title>Multiple HTTP/2 enabled web servers are vulnerable to a DDoS attack (Rapid Reset Attack)</title>
<para>A flaw was found in handling multiplexed streams in the HTTP/2 protocol. In previous releases of MTV, the HTTP/2 protocol allowed a denial of service (server resource consumption) because request cancellation could reset multiple streams quickly. The server had to set up and tear down the streams while not hitting any server-side limit for the maximum number of active streams per connection, which resulted in a denial of service due to server resource consumption.</para>
</formalpara>
<simpara>This issue has been resolved in MTV 2.4.3 and 2.5.2. It is advised to update to one of these versions of MTV or later.</simpara>
<simpara>For more information, see <link xlink:href="https://access.redhat.com/security/cve/cve-2023-44487">CVE-2023-44487 (Rapid Reset Attack)</link> and <link xlink:href="https://access.redhat.com/security/cve/cve-2023-39325">CVE-2023-39325 (Rapid Reset Attack)</link>.</simpara>
<formalpara>
<title>Improve invalid/conflicting VM name handling</title>
<para>Improve the automatic renaming of VMs during migration to fit RFC 1123. This feature that was introduced in 2.3.4 is enhanced to cover more special cases. <link xlink:href="https://issues.redhat.com/browse/MTV-212">(MTV-212)</link></para>
</formalpara>
<formalpara>
<title>Prevent locking user accounts due to incorrect credentials</title>
<para>If a user specifies an incorrect password for RHV providers, they are no longer locked in RHV. An error returns when the RHV manager is accessible and adding the provider. If the RHV manager is inaccessible, the provider is added, but there would be no further attempt after failing, due to incorrect credentials. <link xlink:href="https://issues.redhat.com/browse/MTV-324">(MTV-324)</link></para>
</formalpara>
<formalpara>
<title>Users without cluster-admin role can create new providers</title>
<para>Previously, the <literal>cluster-admin</literal> role was required to browse and create providers. In this release, users with sufficient permissions on MTV resources (providers, plans, migrations, NetworkMaps, StorageMaps, hooks) can operate MTV without cluster-admin permissions. <link xlink:href="https://issues.redhat.com/browse/MTV-334">(MTV-334)</link></para>
</formalpara>
<formalpara>
<title>Convert i440fx to q35</title>
<para>Migration of virtual machines with i440fx chipset is now supported. The chipset is converted to q35 during the migration. <link xlink:href="https://issues.redhat.com/browse/MTV-430">(MTV-430)</link></para>
</formalpara>
<formalpara>
<title>Preserve the UUID setting in SMBIOS for a VM that is migrated from RHV</title>
<para>The Universal Unique ID (UUID) number within the System Management BIOS (SMBIOS) no longer changes for VMs that are migrated from RHV. This enhancement enables applications that operate within the guest operating system and rely on this setting, such as for licensing purposes, to operate on the target OCP cluster in a manner similar to that of RHV. <link xlink:href="https://issues.redhat.com/browse/MTV-597">(MTV-597)</link></para>
</formalpara>
<formalpara>
<title>Do not expose password for RHV in error messages</title>
<para>Previously, the password that was specified for RHV manager appeared in error messages that were displayed in the web console and logs when failing to connect to RHV. In this release, error messages that are generated when failing to connect to RHV do not reveal the password for RHV manager.</para>
</formalpara>
<formalpara>
<title>QEMU guest agent is now installed on migrated VMs</title>
<para>The QEMU guest agent is installed on VMs during cold migration from vSphere. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2018062">(BZ#2018062)</link></para>
</formalpara>
</section>
</chapter>
<chapter xml:id="rn-23_release-notes">
<title>Migration Toolkit for Virtualization 2.3</title>
<simpara>You can migrate virtual machines (VMs) from VMware vSphere or Red Hat Virtualization to OpenShift Virtualization with the Migration Toolkit for Virtualization (MTV).</simpara>
<simpara>The release notes describe technical changes, new features and enhancements, and known issues.</simpara>
<section xml:id="technical-changes-23_release-notes">
<title>Technical changes</title>
<simpara>This release has the following technical changes:</simpara>
<formalpara>
<title>Setting the VddkInitImage path is part of the procedure of adding VMware provider.</title>
<para>In the web console, you enter the VddkInitImage path when adding a VMware provider. Alternatively, from the CLI, you add the VddkInitImage path to the <literal>Provider</literal> CR for VMware migrations.</para>
</formalpara>
<formalpara>
<title>The StorageProfile resource needs to be updated for a non-provisioner storage class</title>
<para>You must update the <literal>StorageProfile</literal> resource with <literal>accessModes</literal> and <literal>volumeMode</literal> for non-provisioner storage classes such as NFS. The documentation includes a link to the relevant procedure.</para>
</formalpara>
</section>
<section xml:id="new-features-and-enhancements-23_release-notes">
<title>New features and enhancements</title>
<simpara>This release has the following features and improvements:</simpara>
<formalpara>
<title>MTV 2.6 supports warm migration from RHV</title>
<para>You can use warm migration to migrate VMs from both VMware and RHV.</para>
</formalpara>
<formalpara>
<title>The minimal sufficient set of privileges for VMware users is established</title>
<para>VMware users do not have to have full <literal>cluster-admin</literal> privileges to perform a VM migration. The minimal sufficient set of user’s privileges is established and documented.</para>
</formalpara>
<formalpara>
<title>MTV documentation is updated with instructions on using hooks</title>
<para>MTV documentation includes instructions on adding hooks to migration plans and running hooks on VMs.</para>
</formalpara>
</section>
<section xml:id="known-issues-23_release-notes">
<title>Known issues</title>
<simpara>This release has the following known issues:</simpara>
<formalpara>
<title>Some warm migrations from RHV might fail</title>
<para>When you run a migration plan for warm migration of multiple VMs from RHV, the migrations of some VMs might fail during the cutover stage. In that case, restart the migration plan and set the cutover time for the VM migrations that failed in the first run. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2063531">(<emphasis role="strong">BZ#2063531</emphasis>)</link></para>
</formalpara>
<formalpara>
<title>Snapshots are not deleted after warm migration</title>
<para>The Migration Controller service does not delete snapshots automatically after a successful warm migration of a RHV VM. You can <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.9/html-single/virtualization/index#virt-deleting-vm-snapshot-web_virt-managing-vm-snapshots">delete the snapshots manually</link>. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2053183">(<emphasis role="strong">BZ#22053183</emphasis>)</link></para>
</formalpara>
<formalpara>
<title>Warm migration from RHV fails if a snapshot operation is performed on the source VM</title>
<para>If the user performs a snapshot operation on the source VM at the time when a migration snapshot is scheduled, the migration fails instead of waiting for the user’s snapshot operation to finish. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2057459">(<emphasis role="strong">BZ#2057459</emphasis>)</link></para>
</formalpara>
<formalpara>
<title>QEMU guest agent is not installed on migrated VMs</title>
<para>The QEMU guest agent is not installed on migrated VMs. Workaround: Install the QEMU guest agent with a post-migration hook. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2018062"><emphasis role="strong">BZ#2018062</emphasis></link>)</para>
</formalpara>
<formalpara>
<title>Deleting migration plan does not remove temporary resources.</title>
<para>Deleting a migration plan does not remove temporary resources such as <literal>importer</literal> pods, <literal>conversion</literal> pods, config maps, secrets, failed VMs and data volumes. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2018974"><emphasis role="strong">BZ#2018974</emphasis></link>) You must archive a migration plan before deleting it in order to clean up the temporary resources.</para>
</formalpara>
<formalpara>
<title>Unclear error status message for VM with no operating system</title>
<para>The error status message for a VM with no operating system on the <emphasis role="strong">Migration plan details</emphasis> page of the web console does not describe the reason for the failure. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2008846"><emphasis role="strong">BZ#2008846</emphasis></link>)</para>
</formalpara>
<formalpara>
<title>Log archive file includes logs of a deleted migration plan or VM</title>
<para>If you delete a migration plan and then run a new migration plan with the same name or if you delete a migrated VM and then remigrate the source VM, the log archive file created by the MTV web console might include the logs of the deleted migration plan or VM. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2023764"><emphasis role="strong">BZ#2023764</emphasis></link>)</para>
</formalpara>
<formalpara>
<title>Migration of virtual machines with encrypted partitions fails during conversion</title>
<para>The problem occurs for both vSphere and RHV migrations.</para>
</formalpara>
<formalpara>
<title>MTV 2.3.4 only: When the source provider is RHV, duplicating a migration plan fails in either the network mapping stage or the storage mapping stage.</title>
<para>Possible workaround: Delete cache in the browser or restart the browser. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2143191"><emphasis role="strong">BZ#2143191</emphasis></link>)</para>
</formalpara>
</section>
</chapter>
<chapter xml:id="rn-22_release-notes">
<title>Migration Toolkit for Virtualization 2.2</title>
<simpara>You can migrate virtual machines (VMs) from VMware vSphere or Red Hat Virtualization to OpenShift Virtualization with the Migration Toolkit for Virtualization (MTV).</simpara>
<simpara>The release notes describe technical changes, new features and enhancements, and known issues.</simpara>
<section xml:id="technical-changes-22_release-notes">
<title>Technical changes</title>
<simpara>This release has the following technical changes:</simpara>
<formalpara>
<title>Setting the precopy time interval for warm migration</title>
<para>You can set the time interval between snapshots taken during the precopy stage of warm migration.</para>
</formalpara>
</section>
<section xml:id="new-features-and-enhancements-22_release-notes">
<title>New features and enhancements</title>
<simpara>This release has the following features and improvements:</simpara>
<formalpara>
<title>Creating validation rules</title>
<para>You can create custom validation rules to check the suitability of VMs for migration. Validation rules are based on the VM attributes collected by the <literal>Provider Inventory</literal> service and written in <link xlink:href="https://www.openpolicyagent.org/docs/latest/policy-language/">Rego</link>, the Open Policy Agent native query language.</para>
</formalpara>
<formalpara>
<title>Downloading logs by using the web console</title>
<para>You can download logs for a migration plan or a migrated VM by using the MTV web console.</para>
</formalpara>
<formalpara>
<title>Duplicating a migration plan by using the web console</title>
<para>You can duplicate a migration plan by using the web console, including its VMs, mappings, and hooks, in order to edit the copy and run as a new migration plan.</para>
</formalpara>
<formalpara>
<title>Archiving a migration plan by using the web console</title>
<para>You can archive a migration plan by using the MTV web console. Archived plans can be viewed or duplicated. They cannot be run, edited, or unarchived.</para>
</formalpara>
</section>
<section xml:id="known-issues-22_release-notes">
<title>Known issues</title>
<simpara>This release has the following known issues:</simpara>
<formalpara>
<title>Certain Validation service issues do not block migration</title>
<para>Certain <literal>Validation</literal> service issues, which are marked as <literal>Critical</literal> and display the assessment text, <literal>The VM will not be migrated</literal>, do not block migration. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2025977"><emphasis role="strong">BZ#2025977</emphasis></link>)</para>
</formalpara>
<simpara>The following <literal>Validation</literal> service assessments do not block migration:</simpara>
<table frame="all" rowsep="1" colsep="1">
<title>Issues that do not block migration</title>
<tgroup cols="2">
<colspec colname="col_1" colwidth="67*"/>
<colspec colname="col_2" colwidth="33*"/>
<thead>
<row>
<entry align="left" valign="top">Assessment</entry>
<entry align="left" valign="top">Result</entry>
</row>
</thead>
<tbody>
<row>
<entry align="left" valign="top"><simpara>The disk interface type is not supported by OpenShift Virtualization (only sata, virtio_scsi and virtio interface types are currently supported).</simpara></entry>
<entry align="left" valign="top"><simpara>The migrated VM will have a virtio disk if the source interface is not recognized.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>The NIC interface type is not supported by OpenShift Virtualization (only e1000, rtl8139 and virtio interface types are currently supported).</simpara></entry>
<entry align="left" valign="top"><simpara>The migrated VM will have a virtio NIC if the source interface is not recognized.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>The VM is using a vNIC profile configured for host device passthrough, which is not currently supported by OpenShift Virtualization.</simpara></entry>
<entry align="left" valign="top"><simpara>The migrated VM will have an SR-IOV NIC. The destination network must be set up correctly.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>One or more of the VM’s disks has an illegal or locked status condition.</simpara></entry>
<entry align="left" valign="top"><simpara>The migration will proceed but the disk transfer is likely to fail.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>The VM has a disk with a storage type other than <literal>image</literal>, and this is not currently supported by OpenShift Virtualization.</simpara></entry>
<entry align="left" valign="top"><simpara>The migration will proceed but the disk transfer is likely to fail.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>The VM has one or more snapshots with disks in ILLEGAL state. This is not currently supported by OpenShift Virtualization.</simpara></entry>
<entry align="left" valign="top"><simpara>The migration will proceed but the disk transfer is likely to fail.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>The VM has USB support enabled, but USB devices are not currently supported by OpenShift Virtualization.</simpara></entry>
<entry align="left" valign="top"><simpara>The migrated VM will not have USB devices.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>The VM is configured with a watchdog device, which is not currently supported by OpenShift Virtualization.</simpara></entry>
<entry align="left" valign="top"><simpara>The migrated VM will not have a watchdog device.</simpara></entry>
</row>
<row>
<entry align="left" valign="top"><simpara>The VM’s status is not <literal>up</literal> or <literal>down</literal>.</simpara></entry>
<entry align="left" valign="top"><simpara>The migration will proceed but it might hang if the VM cannot be powered off.</simpara></entry>
</row>
</tbody>
</tgroup>
</table>
<formalpara>
<title>QEMU guest agent is not installed on migrated VMs</title>
<para>The QEMU guest agent is not installed on migrated VMs. Workaround: Install the QEMU guest agent with a post-migration hook. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2018062"><emphasis role="strong">BZ#2018062</emphasis></link>)</para>
</formalpara>
<formalpara>
<title>Missing resource causes error message in current.log file</title>
<para>If a resource does not exist, for example, if the <literal>virt-launcher</literal> pod does not exist because the migrated VM is powered off, its log is unavailable.</para>
</formalpara>
<simpara>The following error appears in the missing resource’s <literal>current.log</literal> file when it is downloaded from the web console or created with the <literal>must-gather</literal> tool: <literal>error: expected 'logs [-f] [-p] (POD | TYPE/NAME) [-c CONTAINER]'.</literal> (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2023260"><emphasis role="strong">BZ#2023260</emphasis></link>)</simpara>
<formalpara>
<title>Importer pod log is unavailable after warm migration</title>
<para>Retaining the <literal>importer</literal> pod for debug purposes causes warm migration to hang during the precopy stage. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2016290"><emphasis role="strong">BZ#2016290</emphasis></link>)</para>
</formalpara>
<simpara>As a temporary workaround, the <literal>importer</literal> pod is removed at the end of the precopy stage so that the precopy succeeds. However, this means that the <literal>importer</literal> pod log is not retained after warm migration is complete. You can only view the <literal>importer</literal> pod log by using the <literal>oc logs -f &lt;cdi-importer_pod&gt;</literal> command during the precopy stage.</simpara>
<simpara>This issue only affects the <literal>importer</literal> pod log and warm migration. Cold migration and the <literal>virt-v2v</literal> logs are not affected.</simpara>
<formalpara>
<title>Deleting migration plan does not remove temporary resources.</title>
<para>Deleting a migration plan does not remove temporary resources such as <literal>importer</literal> pods, <literal>conversion</literal> pods, config maps, secrets, failed VMs and data volumes. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2018974"><emphasis role="strong">BZ#2018974</emphasis></link>) You must archive a migration plan before deleting it in order to clean up the temporary resources.</para>
</formalpara>
<formalpara>
<title>Unclear error status message for VM with no operating system</title>
<para>The error status message for a VM with no operating system on the <emphasis role="strong">Migration plan details</emphasis> page of the web console does not describe the reason for the failure. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2008846"><emphasis role="strong">BZ#2008846</emphasis></link>)</para>
</formalpara>
<formalpara>
<title>Network, storage, and VM referenced by name in the <literal>Plan</literal> CR are not displayed in the web console.</title>
<para>If a Plan CR references storage, network, or VMs by name instead of by ID, the resources do not appear in the MTV web console. The migration plan cannot be edited or duplicated. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=1986020"><emphasis role="strong">BZ#1986020</emphasis></link>)</para>
</formalpara>
<formalpara>
<title>Log archive file includes logs of a deleted migration plan or VM</title>
<para>If you delete a migration plan and then run a new migration plan with the same name or if you delete a migrated VM and then remigrate the source VM, the log archive file created by the MTV web console might include the logs of the deleted migration plan or VM. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2023764"><emphasis role="strong">BZ#2023764</emphasis></link>)</para>
</formalpara>
<formalpara>
<title>If a target VM is deleted during migration, its migration status is <literal>Succeeded</literal> in the <literal>Plan</literal> CR</title>
<para>If you delete a target <literal>VirtualMachine</literal> CR during the <emphasis>Convert image to kubevirt</emphasis> step of the migration, the <emphasis role="strong">Migration details</emphasis> page of the web console displays the state of the step as <literal>VirtualMachine CR not found</literal>. However, the status of the VM migration is <literal>Succeeded</literal> in the <literal>Plan</literal> CR file and in the web console. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2031529"><emphasis role="strong">BZ#2031529</emphasis></link>)</para>
</formalpara>
</section>
</chapter>
<chapter xml:id="rn-21_release-notes">
<title>Migration Toolkit for Virtualization 2.1</title>
<simpara>You can migrate virtual machines (VMs) from VMware vSphere or Red Hat Virtualization to OpenShift Virtualization with the Migration Toolkit for Virtualization (MTV).</simpara>
<simpara>The release notes describe new features and enhancements, known issues, and technical changes.</simpara>
<section xml:id="technical-changes-21_release-notes">
<title>Technical changes</title>
<formalpara>
<title>VDDK image added to <literal>HyperConverged</literal> custom resource</title>
<para>The VMware Virtual Disk Development Kit (VDDK) SDK image must be added to the <literal>HyperConverged</literal> custom resource. Before this release, it was referenced in the <literal>v2v-vmware</literal> config map.</para>
</formalpara>
</section>
<section xml:id="new-features-and-enhancements-21_release-notes">
<title>New features and enhancements</title>
<simpara>This release adds the following features and improvements.</simpara>
<formalpara>
<title>Cold migration from Red Hat Virtualization</title>
<para>You can perform a cold migration of VMs from Red Hat Virtualization.</para>
</formalpara>
<formalpara>
<title>Migration hooks</title>
<para>You can create migration hooks to run Ansible playbooks or custom code before or after migration.</para>
</formalpara>
<formalpara>
<title>Filtered <literal>must-gather</literal> data collection</title>
<para>You can specify options for the <literal>must-gather</literal> tool that enable you to filter the data by namespace, migration plan, or VMs.</para>
</formalpara>
<formalpara>
<title>SR-IOV network support</title>
<para>You can migrate VMs with a single root I/O virtualization (SR-IOV) network interface if the OpenShift Virtualization environment has an SR-IOV network.</para>
</formalpara>
</section>
<section xml:id="known-issues-21_release-notes">
<title>Known issues</title>
<formalpara>
<title>QEMU guest agent is not installed on migrated VMs</title>
<para>The QEMU guest agent is not installed on migrated VMs. Workaround: Install the QEMU guest agent with a post-migration hook. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2018062"><emphasis role="strong">BZ#2018062</emphasis></link>)</para>
</formalpara>
<formalpara>
<title>Disk copy stage does not progress</title>
<para>The disk copy stage of a RHV VM does not progress and the MTV web console does not display an error message. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=1990596">(<emphasis role="strong">BZ#1990596</emphasis>)</link></para>
</formalpara>
<simpara>The cause of this problem might be one of the following conditions:</simpara>
<itemizedlist>
<listitem>
<simpara>The storage class does not exist on the target cluster.</simpara>
</listitem>
<listitem>
<simpara>The VDDK image has not been added to the <literal>HyperConverged</literal> custom resource.</simpara>
</listitem>
<listitem>
<simpara>The VM does not have a disk.</simpara>
</listitem>
<listitem>
<simpara>The VM disk is locked.</simpara>
</listitem>
<listitem>
<simpara>The VM time zone is not set to UTC.</simpara>
</listitem>
<listitem>
<simpara>The VM is configured for a USB device.</simpara>
</listitem>
</itemizedlist>
<simpara>To disable USB devices, see <link xlink:href="https://access.redhat.com/documentation/en-us/red_hat_virtualization/4.4/html-single/virtual_machine_management_guide/index#sect-Configuring_USB_Devices">Configuring USB Devices</link> in the Red Hat Virtualization documentation.</simpara>
<simpara>To determine the cause:</simpara>
<orderedlist numeration="arabic">
<listitem>
<simpara>Click <emphasis role="strong">Workloads</emphasis> → <emphasis role="strong">Virtualization</emphasis> in the Red Hat OpenShift web console.</simpara>
</listitem>
<listitem>
<simpara>Click the <emphasis role="strong">Virtual Machines</emphasis> tab.</simpara>
</listitem>
<listitem>
<simpara>Select a virtual machine to open the <emphasis role="strong">Virtual Machine Overview</emphasis> screen.</simpara>
</listitem>
<listitem>
<simpara>Click <emphasis role="strong">Status</emphasis> to view the status of the virtual machine.</simpara>
</listitem>
</orderedlist>
<formalpara>
<title>VM time zone must be UTC with no offset</title>
<para>The time zone of the source VMs must be UTC with no offset. You can set the time zone to <literal>GMT Standard Time</literal> after first assessing the potential impact on the workload. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=1993259">(<emphasis role="strong">BZ#1993259</emphasis>)</link></para>
</formalpara>
<formalpara>
<title>RHV resource UUID causes a "Provider not found" error</title>
<para>If a RHV resource UUID is used in a <literal>Host</literal>, <literal>NetworkMap</literal>, <literal>StorageMap</literal>, or <literal>Plan</literal> custom resource (CR), a "Provider not found" error is displayed.</para>
</formalpara>
<simpara>You must use the resource name. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=1994037">(<emphasis role="strong">BZ#1994037</emphasis>)</link></simpara>
<formalpara>
<title>Same RHV resource name in different data centers causes ambiguous reference</title>
<para>If a RHV resource name is used in a <literal>NetworkMap</literal>, <literal>StorageMap</literal>, or <literal>Plan</literal> custom resource (CR) and if the same resource name exists in another data center, the <literal>Plan</literal> CR displays a critical "Ambiguous reference" condition. You must rename the resource or use the resource UUID in the CR.</para>
</formalpara>
<simpara>In the web console, the resource name appears twice in the same list without a data center reference to distinguish them. You must rename the resource. <link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=1993089">(<emphasis role="strong">BZ#1993089</emphasis>)</link></simpara>
<formalpara>
<title>Snapshots are not deleted after warm migration</title>
<para>Snapshots are not deleted automatically after a successful warm migration of a VMware VM. You must delete the snapshots manually in VMware vSphere. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2001270"><emphasis role="strong">BZ#2001270</emphasis></link>)</para>
</formalpara>
</section>
</chapter>
<chapter xml:id="rn-20_release-notes">
<title>Migration Toolkit for Virtualization 2.0</title>
<simpara>You can migrate virtual machines (VMs) from VMware vSphere with the Migration Toolkit for Virtualization (MTV).</simpara>
<simpara>The release notes describe new features and enhancements, known issues, and technical changes.</simpara>
<section xml:id="new-features-and-enhancements-20_release-notes">
<title>New features and enhancements</title>
<simpara>This release adds the following features and improvements.</simpara>
<formalpara>
<title>Warm migration</title>
<para>Warm migration reduces downtime by copying most of the VM data during a precopy stage while the VMs are running. During the cutover stage, the VMs are stopped and the rest of the data is copied.</para>
</formalpara>
<formalpara>
<title>Cancel migration</title>
<para>You can cancel an entire migration plan or individual VMs while a migration is in progress. A canceled migration plan can be restarted in order to migrate the remaining VMs.</para>
</formalpara>
<formalpara>
<title>Migration network</title>
<para>You can select a migration network for the source and target providers for improved performance. By default, data is copied using the VMware administration network and the Red Hat OpenShift pod network.</para>
</formalpara>
<formalpara>
<title>Validation service</title>
<para>The validation service checks source VMs for issues that might affect migration and flags the VMs with concerns in the migration plan.</para>
</formalpara>
<important>
<simpara>The validation service is a Technology Preview feature only. Technology Preview features
are not supported with Red Hat production service level agreements (SLAs) and
might not be functionally complete. Red Hat does not recommend using them
in production. These features provide early access to upcoming product
features, enabling customers to test functionality and provide feedback during
the development process.</simpara>
<simpara>For more information about the support scope of Red Hat Technology Preview
features, see <link xlink:href="https://access.redhat.com/support/offerings/techpreview/">https://access.redhat.com/support/offerings/techpreview/</link>.</simpara>
</important>
</section>
<section xml:id="known-issues-20_release-notes">
<title>Known issues</title>
<simpara>This section describes known issues and mitigations.</simpara>
<formalpara>
<title>QEMU guest agent is not installed on migrated VMs</title>
<para>The QEMU guest agent is not installed on migrated VMs. Workaround: Install the QEMU guest agent with a post-migration hook. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=2018062"><emphasis role="strong">BZ#2018062</emphasis></link>)</para>
</formalpara>
<formalpara>
<title>Network map displays a "Destination network not found" error</title>
<para>If the network map remains in a <literal>NotReady</literal> state and the <literal>NetworkMap</literal> manifest displays a <literal>Destination network not found</literal> error, the cause is a missing network attachment definition. You must create a <link xlink:href="https://access.redhat.com/documentation/en-us/openshift_container_platform/4.14/html/virtualization/virtual-machines#virt-creating-network-attachment-definition">network attachment definition</link> for each additional destination network before you create the network map. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=1971259"><emphasis role="strong">BZ#1971259</emphasis></link>)</para>
</formalpara>
<formalpara>
<title>Warm migration gets stuck during third precopy</title>
<para>Warm migration uses changed block tracking snapshots to copy data during the precopy stage. The snapshots are created at one-hour intervals by default. When a snapshot is created, its contents are copied to the destination cluster. However, when the third snapshot is created, the first snapshot is deleted and the block tracking is lost. (<link xlink:href="https://bugzilla.redhat.com/show_bug.cgi?id=1969894"><emphasis role="strong">BZ#1969894</emphasis></link>)</para>
</formalpara>
<simpara>You can do one of the following to mitigate this issue:</simpara>
<itemizedlist>
<listitem>
<simpara>Start the cutover stage no more than one hour after the precopy stage begins so that only one internal snapshot is created.</simpara>
</listitem>
<listitem>
<simpara>Increase the snapshot interval in the <literal>vm-import-controller-config</literal> config map to <literal>720</literal> minutes:</simpara>
<programlisting language="terminal" linenumbering="unnumbered">$ oc patch configmap/vm-import-controller-config \
  -n openshift-cnv -p '{"data": \
  {"warmImport.intervalMinutes": "720"}}'</programlisting>
</listitem>
</itemizedlist>
</section>
</chapter>
</book>