// Module included in the following assemblies:
//

:_mod-docs-content-type: PROCEDURE
[id="mtc-vm-creating-mig-plan_{context}"]
= Creating the migration plan

To migrate the `mig-vm` namespace, ensure that the `namespaces` field of the migration plan includes `mig-vm`.

Modify the contents of the migration plan by adding `mig-vm` to the namespaces.

.Example YAML

[source,yaml]
----
apiVersion: migration.openshift.io/v1alpha1
kind: MigPlan
metadata:
  name: live-migrate-plan
  namespace: openshift-migration
spec:
  namespaces:
  - mig-vm # <1>
...
----
<1> add `mig-vm` to the namespaces.

In order to attempt a storage live migration the `liveMigrate` field in the spec must be set to true (and KubeVirt must be configred and be enabled to perform storage live migration.

[source,yaml]
----
apiVersion: migration.openshift.io/v1alpha1
kind: MigPlan
metadata:
  name: live-migrate-plan
  namespace: openshift-migration
spec:
  liveMigrate: true
  namespaces:
[... snipped, see config/samples/mig-plan.yaml for other required fields ...]
----

Live migration only happens during the cutover of a migration plan. Staging the migration plan skips any running virtual machines and does not sync the data. Any stopped virtual machine disks will be synced.

During the migration, a `MigMigration` resource is created indicating what type of migration is happening:

* stage
* rollback
* cutover

The status of the `MigMigration` will contain progress information about any storage live migrations.

Any offline migrations will have a `DirectVolumeMigrationProgress` status that shows the progress of the offline migration.

Each `MigMigration` creates a `DirectVolumeMigration` if the migration plan is a direct volume migration plan. To perform a storage live migration, a direct volume migration is required. The `DirectVolumeMigration` resource status will indicate the progress and status of any ongoing migrations, either live migrations or offline migrations.
