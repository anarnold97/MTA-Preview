<?xml version='1.0' encoding='UTF-8'?>
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" class="chrometwo"><head><title>Rules Development Guide</title><link rel="stylesheet" type="text/css" href="Common_Content/css/default.css"/><meta name="generator" content="publican v4.3.2"/><meta name="description" content="This guide describes how to create custom XML rules for the Migration Toolkit for Applications."/><link rel="next" href="#making-open-source-more-inclusive" title="Making open source more inclusive"/><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/><script type="text/javascript" src="Common_Content/scripts/jquery-1.7.1.min.js"> </script><script type="text/javascript" src="Common_Content/scripts/utils.js"> </script><script type="text/javascript" src="Common_Content/scripts/highlight.js/highlight.pack.js"> </script></head><body><div id="chrometwo"><div id="main"><div xml:lang="en-US" class="book" id="idm45236661857520"><div class="titlepage"><div><div class="producttitle"><span class="productname">Migration Toolkit for Applications</span> <span class="productnumber">7.1</span></div><div><h1 class="title">Rules Development Guide</h1></div><div><h2 class="subtitle">Create custom rules to enhance migration coverage.</h2></div><div><div xml:lang="en-US" class="authorgroup"><span class="orgname">Red Hat Customer Content Services</span></div></div><div><a href="#idm45236657933760">Legal Notice</a></div><div><div class="abstract"><p class="title"><strong>Abstract</strong></p><div class="para">
				This guide describes how to create custom XML rules for the Migration Toolkit for Applications.
			</div></div></div></div><hr/></div><div class="toc"><ul class="toc"><li><span class="preface"><a href="#making-open-source-more-inclusive">Making open source more inclusive</a></span></li><li><span class="chapter"><a href="#introduction_rules-development-guide">1. Introduction</a></span><ul><li><span class="section"><a href="#rules-guide-intro_rules-development-guide">1.1. About the Rule Development Guide</a></span><ul><li><span class="section"><a href="#mta-about-home-var_rules-development-guide">1.1.1. Use of <code class="literal">&lt;MTA_HOME&gt;</code> in this guide</a></span></li></ul></li><li><span class="section"><a href="#about-rules_rules-development-guide">1.2. The MTA rules</a></span></li></ul></li><li><span class="chapter"><a href="#creating-yaml-rules_rules-development-guide">2. Creating YAML rules</a></span><ul><li><span class="section"><a href="#yaml-rule-structure-syntax_rules-development-guide">2.1. YAML rule structure and syntax</a></span><ul><li><span class="section"><a href="#yaml-rule-metadata_rules-development-guide">2.1.1. Rule metadata</a></span></li><li><span class="section"><a href="#rulesets">2.1.2. Rulesets</a></span></li></ul></li><li><span class="section"><a href="#creating-basic-yaml-rules_rules-development-guide">2.2. Creating a basic YAML rule</a></span><ul><li><span class="section"><a href="#create-basic-yaml-rule-template_rules-development-guide">2.2.1. Creating a basic YAML rule template</a></span></li><li><span class="section"><a href="#create-basic-yaml-ruleset-template_rules-development-guide">2.2.2. Creating a basic YAML ruleset template</a></span></li><li><span class="section"><a href="#create-yaml-rule_rules-development-guide">2.2.3. Creating a YAML rule</a></span></li><li><span class="section"><a href="#running-analysis-using-custom-yaml-rule_rules-development-guide">2.2.4. Running an analysis using a custom YAML rule</a></span></li></ul></li><li><span class="section"><a href="#create-first-yaml-rule_rules-development-guide">2.3. Creating your first YAML rule</a></span><ul><li><span class="section"><a href="#creating-yaml-file-for-the-rule_rules-development-guide">2.3.1. Creating a YAML file for the rule</a></span></li><li><span class="section"><a href="#mta-creating-data-to-test-the-rule_rules-development-guide">2.3.2. Creating data to test the rule</a></span></li><li><span class="section"><a href="#mta-creating-the-rule_rules-development-guide">2.3.3. Creating the rule</a></span></li><li><span class="section"><a href="#mta-installing-the-rule_rules-development-guide">2.3.4. Installing the rule</a></span></li><li><span class="section"><a href="#mta-testing-the-rule_rules-development-guide">2.3.5. Testing the rule</a></span></li><li><span class="section"><a href="#mta-reviewing-the-report_rules-development-guide">2.3.6. Reviewing the report</a></span></li></ul></li><li><span class="section"><a href="#validation-report_rules-development-guide">2.4. About validation reports</a></span><ul><li><span class="section"><a href="#validation-report-understanding_rules-development-guide">2.4.1. Creating a validation report</a></span></li><li><span class="section"><a href="#validation-report-errors_rules-development-guide">2.4.2. Validation report error messages</a></span></li></ul></li></ul></li><li><span class="appendix"><a href="#reference_material">A. Reference material</a></span><ul><li><span class="section"><a href="#about-story-points_rules-development-guide">A.1. About rule story points</a></span><ul><li><span class="section"><a href="#what_are_story_points">A.1.1. What are story points?</a></span></li><li><span class="section"><a href="#how_story_points_are_estimated_in_rules">A.1.2. How story points are estimated in rules</a></span></li><li><span class="section"><a href="#task_category">A.1.3. Task category</a></span></li></ul></li><li><span class="section"><a href="#additional_resources">A.2. Additional resources</a></span><ul><li><span class="section"><a href="#rules-important-links_rules-development-guide">A.2.1. Additional resources</a></span></li></ul></li></ul></li></ul></div><section class="preface" id="making-open-source-more-inclusive"><div class="titlepage"><div><div><h1 class="title">Making open source more inclusive</h1></div></div></div><p class="_abstract _abstract">
			Red Hat is committed to replacing problematic language in our code, documentation, and web properties. We are beginning with these four terms: master, slave, blacklist, and whitelist. Because of the enormity of this endeavor, these changes will be implemented gradually over several upcoming releases. For more details, see <a class="link" href="https://www.redhat.com/en/blog/making-open-source-more-inclusive-eradicating-problematic-language">our CTO Chris Wright’s message</a>.
		</p></section><section class="chapter" id="introduction_rules-development-guide"><div class="titlepage"><div><div><h1 class="title">Chapter 1. Introduction</h1></div></div></div><section class="section" id="rules-guide-intro_rules-development-guide"><div class="titlepage"><div><div><h2 class="title">1.1. About the Rule Development Guide</h2></div></div></div><p>
				This guide is intended for software engineers who want to create custom YAML-based rules for Migration Toolkit for Applications (MTA) tools.
			</p><p>
				See the <a class="link" href="https://access.redhat.com/documentation/en-us/migration_toolkit_for_applications/7.1/html-single/introduction_to_the_migration_toolkit_for_applications"><span class="emphasis"><em>Introduction to the Migration Toolkit for Applications</em></span></a> for an overview and the <a class="link" href="https://access.redhat.com/documentation/en-us/migration_toolkit_for_applications/7.1/html-single/cli_guide"><span class="emphasis"><em>CLI Guide</em></span></a> for details.
			</p><section class="section" id="mta-about-home-var_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">1.1.1. Use of <code class="literal">&lt;MTA_HOME&gt;</code> in this guide</h3></div></div></div><p>
					This guide uses the <code class="literal">&lt;MTA_HOME&gt;</code> replaceable variable to denote the path to your MTA installation.
				</p><p>
					The mta-7.1.1-cli&lt;OS&gt;.zip* extracts a single binary called <code class="literal">mta-cli</code>.
				</p><p>
					When you encounter <code class="literal">&lt;MTA_HOME&gt;</code> in this guide, replace it with the actual path to your MTA installation.
				</p></section></section><section class="section" id="about-rules_rules-development-guide"><div class="titlepage"><div><div><h2 class="title">1.2. The MTA rules</h2></div></div></div><p>
				The Migration Toolkit for Applications (MTA) contains rule-based migration tools (analyzers) that you can use to analyze the application user interfaces (APIs), technologies, and architectures used by the applications you plan to migrate. MTA analyzer rules use the following rule pattern:
			</p><pre class="screen">when(condition)
 message(message)
 tag(tags)</pre><p>
				You can use the MTA rules internally to perform the following tasks:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
						Extract files from archives.
					</li><li class="listitem">
						Decompile files.
					</li><li class="listitem">
						Scan and classify file types.
					</li><li class="listitem">
						Analyze XML and other file content.
					</li><li class="listitem">
						Analyze the application code.
					</li><li class="listitem">
						Build the reports.
					</li></ul></div><p>
				MTA builds a data model based on the rule execution results and stores component data and relationships in a graph database. This database can then be queried and updated as required by the migration rules and for reporting purposes.
			</p><div class="admonition note"><div class="admonition_header">Note</div><div><p>
					You can create your own custom analyzer rules. You can use custom rules to identify the use of custom libraries or other components that might not be covered by the provided standard migration rules.
				</p></div></div></section></section><section class="chapter" id="creating-yaml-rules_rules-development-guide"><div class="titlepage"><div><div><h1 class="title">Chapter 2. Creating YAML rules</h1></div></div></div><p>
			Each analyzer rule is a set of instructions that are used to analyze source code and detect issues that are problematic for migration.
		</p><p>
			The analyzer parses user-provided rules, applies them to applications' source code, and generates issues for matched rules. A collection of one or more rules forms a ruleset. Creating rulesets provides a way of organizing multiple rules that achieve a common goal. The analyzer CLI takes rulesets as input arguments.
		</p><section class="section" id="yaml-rule-structure-syntax_rules-development-guide"><div class="titlepage"><div><div><h2 class="title">2.1. YAML rule structure and syntax</h2></div></div></div><p>
				MTA rules are written in YAML. Each rule consists of metadata, conditions and actions, which instruct the analyzer to take specified actions when given conditions match.
			</p><p>
				A YAML rule file in MTA contains one or more YAML rules.
			</p><section class="section" id="yaml-rule-metadata_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">2.1.1. Rule metadata</h3></div></div></div><p>
					Rule metadata contains general information about the rule. The structure of metadata is as follows:
				</p><pre class="programlisting language-terminal">ruleId: "unique_id" <span id="CO1-1"/><span class="callout">1</span>
labels: <span id="CO1-2"/><span class="callout">2</span>
  # key=value pair
  - "label1=val1"
  # valid label with value omitted
  - "label2"
  # valid label with empty value
  - "label3="
  # subdomain prefixed key
  - "konveyor.io/label1=val1"
effort: 1 <span id="CO1-3"/><span class="callout">3</span>
category: mandatory <span id="CO1-4"/><span class="callout">4</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO1-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The ID must be unique within the ruleset to which the rule belongs.
						</div></dd><dt><a href="#CO1-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							See below for a description of the label format.
						</div></dd><dt><a href="#CO1-3"><span class="callout">3</span></a> </dt><dd><div class="para">
							<code class="literal">effort</code> is an integer value that indicates the level of effort needed to fix this issue.
						</div></dd><dt><a href="#CO1-4"><span class="callout">4</span></a> </dt><dd><div class="para">
							<code class="literal">category</code> describes the severity of the issue for migration. The value can be either <code class="literal">mandatory</code>, <code class="literal">optional</code> or <code class="literal">potential</code>. For a description of these categories, see <a class="link" href="#yaml-rule-categories_rules-development-guide" title="2.1.1.2. Rule categories">Rule categories</a>.
						</div></dd></dl></div><section class="section" id="yaml-rule-labels_rules-development-guide"><div class="titlepage"><div><div><h4 class="title">2.1.1.1. Rule labels</h4></div></div></div><p>
						Labels are <code class="literal">key=val</code> pairs specified for rules or rulesets as well as dependencies. For dependencies, a provider adds the labels to the dependencies when retrieving them. Labels on a ruleset are automatically inherited by all the rules that belong to it.
					</p><div class="formalpara"><p class="title"><strong>Label format</strong></p><p>
							Labels are specified under the <code class="literal">labels</code> field as a list of strings in <code class="literal">key=val</code> format as follows:
						</p></div><pre class="programlisting language-terminal">labels:
- "key1=val1"
- "key2=val2"</pre><p>
						The key of a label can be subdomain-prefixed:
					</p><pre class="programlisting language-terminal">labels:
- "konveyor.io/key1=val1"</pre><p>
						The value of a label can be empty:
					</p><pre class="programlisting language-terminal">labels:
- "konveyor.io/key="</pre><p>
						The value of a label can be omitted. In that case, it is treated as an empty value:
					</p><pre class="programlisting language-terminal">labels:
- "konveyor.io/key"</pre><div class="formalpara"><p class="title"><strong>Reserved labels</strong></p><p>
							The analyzer defines some labels that have special meaning as follows:
						</p></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
								<code class="literal">konveyor.io/source</code>: Identifies the source technology to which a rule or a ruleset applies
							</li><li class="listitem">
								<code class="literal">konveyor.io/target</code>: Identifies the target technology to which a rule or a ruleset applies
							</li></ul></div><div class="formalpara"><p class="title"><strong>Label selector</strong></p><p>
							The analyzer CLI takes the <code class="literal">--label-selector</code> field as an option. It is a string expression that supports logical AND, OR and NOT operations. You can use it to filter-in or filter-out rules by their labels.
						</p></div><p>
						<span class="emphasis"><em>Examples:</em></span>
					</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								To filter-in all rules that have a label with the key <code class="literal">konveyor.io/source</code> and value <code class="literal">eap6</code>:
							</p><p class="simpara">
								<code class="literal">--label-selector="konveyor.io/source=eap6"</code>
							</p></li><li class="listitem"><p class="simpara">
								To filter-in all rules that have a label with the key <code class="literal">konveyor.io/source</code> and any value:
							</p><p class="simpara">
								<code class="literal">--label-selector="konveyor.io/source"</code>
							</p></li><li class="listitem"><p class="simpara">
								To perform logical AND operations on matches of multiple rules using the <code class="literal">&amp;&amp;</code> operator:
							</p><p class="simpara">
								<code class="literal">--label-selector="key1=val1 &amp;&amp; key2"</code>
							</p></li><li class="listitem"><p class="simpara">
								To perform logical OR operations on matches of multiple rules using the <code class="literal">||</code> operator:
							</p><p class="simpara">
								<code class="literal">--label-selector="key1=val1 || key2"</code>
							</p></li><li class="listitem"><p class="simpara">
								To perform a NOT operation to filter-out rules that have <code class="literal">key1=val1</code> label set using the <code class="literal">!</code> operator:
							</p><p class="simpara">
								<code class="literal">--label-selector="!key1=val1"</code>
							</p></li><li class="listitem"><p class="simpara">
								To group sub-expressions and control precedence using AND:
							</p><p class="simpara">
								<code class="literal">--label-selector="(key1=val1 || key2=val2) &amp;&amp; !val3"</code>
							</p></li></ul></div><div class="formalpara"><p class="title"><strong>Dependency labels</strong></p><p>
							The analyzer engine adds labels to dependencies. These labels provide additional information about a dependency, such as its programming language and whether the dependency is open source or internal.
						</p></div><p>
						Currently, the analyzer adds the following labels to dependencies:
					</p><pre class="programlisting language-terminal">labels:
- konveyor.io/dep-source=internal
- konveyor.io/language=java</pre><div class="formalpara"><p class="title"><strong>Dependency label selector</strong></p><p>
							The analyzer CLI accepts the <code class="literal">--dep-label-selector</code> option, which allows filtering-in or filtering-out incidents generated from a dependency by their labels.
						</p></div><p>
						For example, the analyzer adds a <code class="literal">konveyor.io/dep-source</code> label to dependencies with a value that indicates whether the dependency is a known open source dependency.
					</p><p>
						To exclude incidents for all such open source dependencies, you can use <code class="literal">--dep-label-selector</code> as follows:
					</p><p>
						<code class="literal">konveyor-analyzer …​ --dep-label-selector !konveyor.io/dep-source=open-source</code>
					</p><p>
						The Java provider in the analyzer can also add an exclude label to a list of packages. To exclude all such packages, you can use <code class="literal">--dep-label-selector</code> and the <code class="literal">!</code> operator as follows:
					</p><p>
						<code class="literal">konveyor-analyzer …​ --dep-label-selector !konveyor.io/exclude</code>
					</p></section><section class="section" id="yaml-rule-categories_rules-development-guide"><div class="titlepage"><div><div><h4 class="title">2.1.1.2. Rule categories</h4></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
								<code class="literal">mandatory</code>
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										You must resolve the issue for a successful migration, otherwise, the resulting application is not expected to build or run successfully. An example of such an issue is proprietary APIs that are not supported on the target platform.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								<code class="literal">optional</code>
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										If you do not resolve the issue, the application is expected to work, but the results might not be optimal. If you do not make the change at the time of migration, you need to put it on the schedule soon after your migration is completed. An example of such an issue is EJB 2.x code not upgraded to EJB 3.
									</li></ul></div></li><li class="listitem"><p class="simpara">
								<code class="literal">potential</code>
							</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
										You need to examine the issue during the migration process, but there is not enough information to determine whether resolving the issue is mandatory for the migration to succeed. An example of such an issue is migrating a third-party proprietary type when there is no directly compatible type on the target platform.
									</li></ul></div></li></ul></div></section><section class="section" id="yaml-rule-actions_rules-development-guide"><div class="titlepage"><div><div><h4 class="title">2.1.1.3. Rule Actions</h4></div></div></div><p>
						Rules can include 2 types of actions: <span class="emphasis"><em>message</em></span> and <span class="emphasis"><em>tag</em></span>. Each rule includes one of them or both.
					</p><div class="formalpara"><p class="title"><strong>Message actions</strong></p><p>
							A message action creates an issue with a message when the rule matches. The custom data exported by providers can also be used in the message.
						</p></div><p>
						<code class="literal">message: "helpful message about the issue"</code>
					</p><p>
						<span class="emphasis"><em>Example:</em></span>
					</p><pre class="programlisting language-terminal">- ruleID: test-rule
  when:
    &lt;CONDITION&gt;
  message: Test rule matched. Please resolve this migration issue.</pre><p>
						Optionally, a message can include hyperlinks to external URLs that provide relevant information about the issue or a quick fix.
					</p><pre class="programlisting language-terminal">links:
  - url: "konveyor.io"
    title: "Short title for the link"</pre><p>
						A message can also be a template to include information about the match interpolated through custom variables on the rule.
					</p><div class="formalpara"><p class="title"><strong>Tag actions</strong></p><p>
							A tag action instructs the analyzer to generate one or more tags for the application when a match is found. Each string in the <code class="literal">tag</code> field can be a comma-separated list of tags. Optionally, you can assign categories to tags.
						</p></div><pre class="programlisting language-terminal">tag:
  - "tag1,tag2,tag3"
  - "Category=tag4,tag5"</pre><p>
						<span class="emphasis"><em>Example</em></span>
					</p><pre class="programlisting language-terminal">- ruleID: test-rule
  when:
    &lt;CONDITION&gt;
  tag:
  - Language=Golang
  - Env=production
  - Source Code</pre><p>
						A tag can be a string or a <code class="literal">key=val</code> pair, where the key is treated as a tag category in MTA. Any rule that has a tag action is referred to as a “tagging rule” in this document.
					</p><p>
						Note that issues are not created for rules that contain only tag actions.
					</p></section><section class="section" id="yaml-rule-conditions_rules-development-guide"><div class="titlepage"><div><div><h4 class="title">2.1.1.4. Rule conditions</h4></div></div></div><p>
						Each rule has a <code class="literal">when</code> block, which specifies a condition that needs to be met for MTA to perform a certain action.
					</p><p>
						The <code class="literal">when</code> block contains one condition, but that condition can have multiple conditions nested under it.
					</p><pre class="programlisting language-terminal">when:
  &lt;condition&gt;
    &lt;nested-condition&gt;</pre><p>
						MTA supports three types of conditions: <code class="literal">provider</code>, <code class="literal">and</code>, and <code class="literal">or</code>.
					</p><section class="section" id="provider_conditions"><div class="titlepage"><div><div><h5 class="title">2.1.1.4.1. Provider conditions</h5></div></div></div><p>
							The Application Analyzer detects the programming languages, frameworks, and tools used to build an application, and it generates default rulesets for each supported provider using the Language Server Protocol (LSP) accordingly. Each supported provider has a ruleset defined by default and is run independently in a separate container.
						</p><p>
							MTA supports multi-language source code analysis. Searching for a specific language in the source code is enabled using the <code class="literal">provider</code> condition. This condition defines a search query for a specific language provider. The <code class="literal">provider</code> condition also specifies which of the provider’s "capabilities" to use for analyzing the code.
						</p><p>
							The <code class="literal">provider</code> condition has the form <code class="literal">&lt;provider_name&gt;.&lt;capability&gt;</code>:
						</p><pre class="programlisting language-terminal">when:
  &lt;provider_name&gt;.&lt;capability&gt;
    &lt;input_fields&gt;</pre><p>
							The analyzer currently supports the following <code class="literal">provider</code> conditions:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									<code class="literal">builtin</code>
								</li><li class="listitem">
									<code class="literal">java</code>
								</li><li class="listitem">
									<code class="literal">go</code>
								</li><li class="listitem">
									<code class="literal">dotnet</code>
								</li></ul></div><div class="admonition important"><div class="admonition_header">Important</div><div><p>
								Support for providing a single report when analyzing multiple applications on the CLI is a Technology Preview feature only. Technology Preview features are not supported with Red Hat production service level agreements (SLAs) and might not be functionally complete. Red Hat does not recommend using them in production. These features provide early access to upcoming product features, enabling customers to test functionality and provide feedback during the development process.
							</p><p>
								For more information about the support scope of Red Hat Technology Preview features, see <a class="link" href="https://access.redhat.com/support/offerings/techpreview/">Technology Preview Features Support Scope</a>.
							</p></div></div><div class="informaltable" id="table-Supported-providers-and-rule-conditions"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 50%; " class="col_1"/><col style="width: 50%; " class="col_2"/></colgroup><thead><tr><th align="left" valign="top" id="idm45236656848128" scope="col">Provider rule conditions</th><th align="left" valign="top" id="idm45236660075088" scope="col">Provider name</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm45236656848128">
										<p>
											Providers that are fully supported and included in the product
										</p>
										</td><td align="left" valign="top" headers="idm45236660075088">
										<p>
											Java
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236656848128">
										<p>
											Providers that have rules already defined in the product
										</p>
										</td><td align="left" valign="top" headers="idm45236660075088">
										<p>
											.NET
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236656848128">
										<p>
											Providers that require custom rulesets for analysis
										</p>
										</td><td align="left" valign="top" headers="idm45236660075088">
										<div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
													Go
												</li><li class="listitem">
													Python
												</li><li class="listitem">
													Node.js
												</li></ul></div>
										</td></tr></tbody></table></div><section class="section" id="literal_builtin_literal_provider"><div class="titlepage"><div><div><h6 class="title">2.1.1.4.1.1. <code class="literal">builtin</code> provider</h6></div></div></div><p>
								<code class="literal">builtin</code> is an internal provider that can analyze various files and internal metadata generated by the engine.
							</p><p>
								This provider has the following capabilities:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">file</code>
									</li><li class="listitem">
										<code class="literal">filecontent</code>
									</li><li class="listitem">
										<code class="literal">xml</code>
									</li><li class="listitem">
										<code class="literal">json</code>
									</li><li class="listitem">
										<code class="literal">hasTags</code>
									</li></ul></div><div class="formalpara"><p class="title"><strong><code class="literal">file</code></strong></p><p>
									The <code class="literal">file</code> capability enables the provider to search for files in the source code that match a given pattern.
								</p></div><pre class="programlisting language-terminal">when:
  builtin.file:
    pattern: "&lt;regex_to_match_filenames&gt;"</pre><div class="formalpara"><p class="title"><strong><code class="literal">filecontent</code></strong></p><p>
									The <code class="literal">filecontent</code> capability enables the provider to search for content that matches a given pattern.
								</p></div><pre class="programlisting language-terminal">when:
  builtin.filecontent:
    filePattern: "&lt;regex_to_match_filenames_to_scope_search&gt;"
    pattern: "&lt;regex_to_match_content_in_the_matching_files&gt;"</pre><div class="formalpara"><p class="title"><strong><code class="literal">xml</code></strong></p><p>
									The <code class="literal">xml</code> capability enables the provider to query XPath expressions on a list of provided XML files. This capability takes 2 input parameters, <code class="literal">xpath</code> and <code class="literal">filepaths</code>.
								</p></div><pre class="programlisting language-terminal">when:
  builtin.xml:
    xpath: "&lt;xpath_expressions&gt;" <span id="CO2-1"/><span class="callout">1</span>
    filepaths: <span id="CO2-2"/><span class="callout">2</span>
      - "/src/file1.xml"
      - "/src/file2.xml"</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO2-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										<code class="literal">xpath</code> must be a valid XPath expression.
									</div></dd><dt><a href="#CO2-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										<code class="literal">filepaths</code> is a list of files to apply the XPath query to.
									</div></dd></dl></div><div class="formalpara"><p class="title"><strong><code class="literal">json</code></strong></p><p>
									The <code class="literal">json</code> capability enables the provider to query XPath expressions on a list of provided JSON files. Currently, <code class="literal">json</code> only takes XPath as input and performs the search on all JSON files in the codebase.
								</p></div><pre class="programlisting language-terminal">when:
  builtin.json:
    xpath: "&lt;xpath_expressions&gt;" <span id="CO3-1"/><span class="callout">1</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO3-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										<code class="literal">xpath</code> must be a valid XPath expression.
									</div></dd></dl></div><div class="formalpara"><p class="title"><strong><code class="literal">hasTags</code></strong></p><p>
									The <code class="literal">hasTags</code> capability enables the provider to query application tags. It queries the internal data structure to check whether the application has the given tags.
								</p></div><pre class="programlisting language-terminal">when:
  # when more than one tag is given, a logical AND is implied
  hasTags: <span id="CO4-1"/><span class="callout">1</span>
    - "tag1"
    - "tag2"</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO4-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										When more than one tag is given, a logical AND is implied.
									</div></dd></dl></div></section><section class="section" id="literal_java_literal_provider"><div class="titlepage"><div><div><h6 class="title">2.1.1.4.1.2. <code class="literal">java</code> provider</h6></div></div></div><p>
								The <code class="literal">java</code> provider analyzes Java source code.
							</p><p>
								This provider has the following capabilities:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">referenced</code>
									</li><li class="listitem">
										<code class="literal">dependency</code>
									</li></ul></div><div class="formalpara"><p class="title"><strong><code class="literal">referenced</code></strong></p><p>
									The <code class="literal">referenced</code> capability enables the provider to find references in the source code. This capability takes three input parameters: <code class="literal">pattern</code>, <code class="literal">location</code>, and 'annotated'.
								</p></div><pre class="programlisting language-terminal">when:
  java.referenced:
    pattern: "&lt;pattern&gt;" <span id="CO5-1"/><span class="callout">1</span>
    location: "&lt;location&gt;" <span id="CO5-2"/><span class="callout">2</span>
    annotated: "&lt;annotated&gt;" <span id="CO5-3"/><span class="callout">3</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO5-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										A regular expression pattern to match, for example, <code class="literal">org.kubernetes.*</code>.
									</div></dd><dt><a href="#CO5-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Specifies the exact location where the pattern needs to be matched, for example, <code class="literal">IMPORT</code>.
									</div></dd><dt><a href="#CO5-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Checks for specific annotations and their elements, such as name and value in the Java code using a query. For example, the following query matches the Bean(url = “http://www.example.com”) annotation in the method.
									</div><pre class="programlisting language-terminal"> annotated:
      pattern: org.framework.Bean
      elements:
      - name: url
        value: "http://www.example.com"</pre></dd></dl></div><p>
								The supported locations are the following:
							</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
										<code class="literal">CONSTRUCTOR_CALL</code>
									</li><li class="listitem">
										<code class="literal">TYPE</code>
									</li><li class="listitem">
										<code class="literal">INHERITANCE</code>
									</li><li class="listitem">
										<code class="literal">METHOD_CALL</code>
									</li><li class="listitem">
										<code class="literal">ANNOTATION</code>
									</li><li class="listitem">
										<code class="literal">IMPLEMENTS_TYPE</code>
									</li><li class="listitem">
										<code class="literal">ENUM_CONSTANT</code>
									</li><li class="listitem">
										<code class="literal">RETURN_TYPE</code>
									</li><li class="listitem">
										<code class="literal">IMPORT</code>
									</li><li class="listitem">
										<code class="literal">VARIABLE_DECLARATION</code>
									</li><li class="listitem">
										<code class="literal">FIELD</code>
									</li><li class="listitem">
										<code class="literal">METHOD</code>
									</li></ul></div><div class="formalpara"><p class="title"><strong><code class="literal">dependency</code></strong></p><p>
									The <code class="literal">dependency</code> capability enables the provider to find dependencies for a given application. MTA generates a list of the application’s dependencies, and you can use this capability to query the list and check whether a certain dependency exists for the application within a given range of the dependency’s versions.
								</p></div><pre class="programlisting language-terminal">when:
  java.dependency:
    name: "&lt;dependency_name&gt;" <span id="CO6-1"/><span class="callout">1</span>
    upperbound: "&lt;version_string&gt;" <span id="CO6-2"/><span class="callout">2</span>
    lowerbound: "&lt;version_string&gt;" <span id="CO6-3"/><span class="callout">3</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO6-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Name of the dependency to search for.
									</div></dd><dt><a href="#CO6-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Upper bound on the version of the dependency.
									</div></dd><dt><a href="#CO6-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Lower bound on the version of the dependency.
									</div></dd></dl></div></section><section class="section" id="literal_go_literal_provider"><div class="titlepage"><div><div><h6 class="title">2.1.1.4.1.3. <code class="literal">go</code> provider</h6></div></div></div><p>
								The <code class="literal">go</code> provider analyzes Go source code. This provider’s capabilities are <code class="literal">referenced</code> and <code class="literal">dependency</code>.
							</p><div class="formalpara"><p class="title"><strong><code class="literal">referenced</code></strong></p><p>
									The <code class="literal">referenced</code> capability enables the provider to find references in the source code.
								</p></div><pre class="programlisting language-terminal">when:
  go.referenced: "&lt;regex_to_find_reference&gt;"</pre><div class="formalpara"><p class="title"><strong><code class="literal">dependency</code></strong></p><p>
									The <code class="literal">dependency</code> capability enables the provider to find dependencies for an application.
								</p></div><pre class="programlisting language-terminal">when:
  go.dependency:
    name: "&lt;dependency_name&gt;" <span id="CO7-1"/><span class="callout">1</span>
    upperbound: "&lt;version_string&gt;" <span id="CO7-2"/><span class="callout">2</span>
    lowerbound: "&lt;version_string&gt;" <span id="CO7-3"/><span class="callout">3</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO7-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										Name of the dependency to search for.
									</div></dd><dt><a href="#CO7-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										Upper bound on the version of the dependency.
									</div></dd><dt><a href="#CO7-3"><span class="callout">3</span></a> </dt><dd><div class="para">
										Lower bound on the version of the dependency.
									</div></dd></dl></div></section><section class="section" id="literal_dotnet_literal_provider"><div class="titlepage"><div><div><h6 class="title">2.1.1.4.1.4. <code class="literal">dotnet</code> provider</h6></div></div></div><p>
								The <code class="literal">dotnet</code> is an external provider used to analyze .NET and C# source code. Currently, the provider supports the <code class="literal">referenced</code> capability.
							</p><div class="formalpara"><p class="title"><strong><code class="literal">referenced</code></strong></p><p>
									The <code class="literal">referenced</code> capability enables the provider to find references in the source code.
								</p></div><pre class="programlisting language-terminal">when:
  dotnet.referenced:
    pattern: "&lt;pattern&gt;" <span id="CO8-1"/><span class="callout">1</span>
    namespace: "&lt;namespace&gt;" <span id="CO8-2"/><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO8-1"><span class="callout">1</span></a> </dt><dd><div class="para">
										<code class="literal">pattern</code>: A regex pattern to match the desired reference. For example, HttpNotFound.
									</div></dd><dt><a href="#CO8-2"><span class="callout">2</span></a> </dt><dd><div class="para">
										<code class="literal">namespace</code>: Specifies the namespace to search within. For example, System.Web.Mvc.
									</div></dd></dl></div></section></section><section class="section" id="custom_variables"><div class="titlepage"><div><div><h5 class="title">2.1.1.4.2. Custom variables</h5></div></div></div><p>
							Provider conditions can have associated custom variables. You can use custom variables to capture relevant information from the matched line in the source code. The values of these variables are interpolated with data matched in the source code. These values can be used to generate detailed templated messages in a rule’s action (see <a class="link" href="#yaml-rule-actions_rules-development-guide" title="2.1.1.3. Rule Actions">Message actions</a>). They can be added to a rule in the <code class="literal">customVariables</code> field:
						</p><pre class="programlisting language-terminal">- ruleID: lang-ref-004
   customVariables:
   - pattern: '([A-z]+)\.get\(\)' <span id="CO9-1"/><span class="callout">1</span>
      name: VariableName <span id="CO9-2"/><span class="callout">2</span>
    message: "Found generic call - {{ VariableName }}" <span id="CO9-3"/><span class="callout">3</span>
  when:
      java.referenced:
          location: METHOD_CALL
          pattern: com.example.apps.GenericClass.get</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO9-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									<code class="literal">pattern</code>: A regular expression pattern that is matched on the source code line when a match is found.
								</div></dd><dt><a href="#CO9-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									<code class="literal">name</code>: The name of the variable that can be used in templates.
								</div></dd><dt><a href="#CO9-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									<code class="literal">message</code>: A template for a message using a custom variable.
								</div></dd></dl></div></section></section><section class="section" id="logical_conditions"><div class="titlepage"><div><div><h4 class="title">2.1.1.5. Logical conditions</h4></div></div></div><p>
						The analyzer provides two basic logical conditions, <code class="literal">and</code> and <code class="literal">or</code>, which enable you to aggregate results of other conditions and create more complex queries.
					</p><section class="section" id="literal_and_literal_condition"><div class="titlepage"><div><div><h5 class="title">2.1.1.5.1. <code class="literal">and</code> condition</h5></div></div></div><p>
							The <code class="literal">and</code> condition performs a logical AND operation on the results of an array of conditions. An <code class="literal">and</code> condition matches when <span class="emphasis"><em>all</em></span> of its child conditions match.
						</p><pre class="programlisting language-terminal">when:
  and:
    - &lt;condition1&gt;
    - &lt;condition2&gt;</pre><p>
							<span class="emphasis"><em>Example</em></span>
						</p><pre class="programlisting language-terminal">when:
  and:
    - java.dependency:
        name: junit.junit
        upperbound: 4.12.2
        lowerbound: 4.4.0
    - java.referenced:
        location: IMPORT
        pattern: junit.junit</pre><p>
							Conditions can also be nested within other conditions.
						</p><p>
							<span class="emphasis"><em>Example</em></span>
						</p><pre class="programlisting language-terminal">when:
  and:
  - and:
    - go.referenced: "*CustomResourceDefinition*"
    - java.referenced:
        pattern: "*CustomResourceDefinition*"
  - go.referenced: "*CustomResourceDefinition*"</pre></section><section class="section" id="literal_or_literal_condition"><div class="titlepage"><div><div><h5 class="title">2.1.1.5.2. <code class="literal">or</code> condition</h5></div></div></div><p>
							The <code class="literal">or</code> condition performs a logical OR operation on the results of an array of conditions. An <code class="literal">or</code> condition matches when <span class="emphasis"><em>any</em></span> of its child conditions matches.
						</p><pre class="programlisting language-terminal">when:
  or:
    - &lt;condition1&gt;
    - &lt;condition2&gt;</pre><p>
							<span class="emphasis"><em>Example</em></span>
						</p><pre class="programlisting language-terminal">when:
  or:
  - java.dependency:
      name: junit.junit
      upperbound: 4.12.2
      lowerbound: 4.4.0
  - java.referenced:
      location: IMPORT
      pattern: junit.junit</pre></section></section></section><section class="section" id="rulesets"><div class="titlepage"><div><div><h3 class="title">2.1.2. Rulesets</h3></div></div></div><p>
					A set of rules forms a ruleset. MTA does not require every rule file to belong to a ruleset, but you can use rulesets to group multiple rules that achieve a common goal and to pass the rules to the rules engine.
				</p><p>
					You can create a ruleset by placing one or more YAML rules in a directory and creating a <code class="literal">ruleset.yaml</code> file at the directory root. When you pass this directory as input to the MTA CLI using the <code class="literal">--rules</code> option, all rules in this directory are treated as a part of the ruleset defined by <code class="literal">ruleset.yaml</code> file.
				</p><p>
					The <code class="literal">ruleset.yaml</code> file stores the metadata of the ruleset.
				</p><pre class="programlisting language-terminal">name: "Name of the ruleset" <span id="CO10-1"/><span class="callout">1</span>
description: "Description of the ruleset"
labels: <span id="CO10-2"/><span class="callout">2</span>
  - key=val</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO10-1"><span class="callout">1</span></a> </dt><dd><div class="para">
							The name must be unique within the provided rulesets.
						</div></dd><dt><a href="#CO10-2"><span class="callout">2</span></a> </dt><dd><div class="para">
							Ruleset labels are inherited by all rules that belong to the ruleset.
						</div></dd></dl></div><p>
					To execute any application analysis, run the following command. Replace &lt;application_to_analyze&gt; with your application, &lt;output_dir&gt; with the directory of your choice, and &lt;custom_rule_dir&gt; with the custom rulesets file.
				</p><pre class="screen">$ mta-cli analyze --input=&lt;application_to_analyze&gt; --output=&lt;output_dir&gt; --rules=&lt;custom_rule_dir&gt; --enable-default-rulesets=false</pre><p>
					On initiation, the mta-cli tool determines the type of application and the corresponding provider needed for analysis. It then starts the provider in a container that has the required dependencies and tools. Finally, the provider uses the analyzer to execute a series of rulesets to analyze the source code.
				</p></section></section><section class="section" id="creating-basic-yaml-rules_rules-development-guide"><div class="titlepage"><div><div><h2 class="title">2.2. Creating a basic YAML rule</h2></div></div></div><p>
				This section describes how to create a basic MTA YAML rule. This assumes that you already have MTA installed. See the MTA <a class="link" href="https://access.redhat.com/documentation/en-us/migration_toolkit_for_applications/7.1/html-single/cli_guide"><span class="emphasis"><em>CLI Guide</em></span></a> for installation instructions.
			</p><section class="section" id="create-basic-yaml-rule-template_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">2.2.1. Creating a basic YAML rule template</h3></div></div></div><p>
					MTA YAML-based rules have the following basic structure:
				</p><pre class="programlisting language-terminal">when(condition)
 message(message)
 tag(tags)</pre><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							In the <code class="literal">/home/&lt;USER&gt;/</code> directory, create a file containing the basic syntax for YAML rules as follows:
						</p><pre class="programlisting language-terminal">- category: mandatory
  description: |
   &lt;DESCRIPTION TITLE&gt;
   &lt;DESCRIPTION TEXT&gt;
  effort: &lt;EFFORT&gt;
  labels:
  - konveyor.io/source=&lt;SOURCE_TECH&gt;
  - konveyor.io/target=&lt;TARGET_TECH&gt;
  links:
 - url: &lt;HYPERLINK&gt;
   title: &lt;HYPERLINK_TITLE&gt;
  message: &lt;MESSAGE&gt;
  tag:
  - &lt;TAG1&gt;
  - &lt;TAG2&gt;
  ruleID: &lt;RULE_ID&gt;
  when:
   &lt;CONDITIONS&gt;</pre></li></ol></div></section><section class="section" id="create-basic-yaml-ruleset-template_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">2.2.2. Creating a basic YAML ruleset template</h3></div></div></div><p>
					If you want to group multiple similar rules, you can create a ruleset for them by placing their files in a directory and creating a <code class="literal">ruleset.yaml</code> file at the directory’s root. When you pass this directory as input to the MTA CLI using the <code class="literal">--rules</code> option, MTA treats all the files in the directory as belonging to the ruleset defined in the <code class="literal">ruleset.yaml</code> file.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a template for <code class="literal">ruleset.yaml</code> files if you want to pass the entire directory using the <code class="literal">--rules</code> option:
						</p><pre class="programlisting language-terminal">name: &lt;RULESET_NAME&gt; <span id="CO11-1"/><span class="callout">1</span>
description: &lt;RULESET_DESCRIPTION&gt;
labels: <span id="CO11-2"/><span class="callout">2</span>
  - key=val</pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO11-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									The name must be unique within the provided rulesets.
								</div></dd><dt><a href="#CO11-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Ruleset labels are inherited by all rules that belong to the ruleset.
								</div></dd></dl></div></li></ol></div></section><section class="section" id="create-yaml-rule_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">2.2.3. Creating a YAML rule</h3></div></div></div><p>
					Each rule file contains one or more YAML rules. Every rule comprises metadata, conditions and actions.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create a <code class="literal">when</code> condition.
						</p><p class="simpara">
							The <code class="literal">when</code> condition of a YAML rule can be <code class="literal">provider</code>, <code class="literal">and</code> or <code class="literal">or</code>.
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem"><p class="simpara">
									Create a <code class="literal">provider</code> condition
								</p><p class="simpara">
									The provider condition is used to define a search query for a specific language provider and to invoke a certain capability of the provider.
								</p><p class="simpara">
									The condition’s general format is <code class="literal">&lt;provider_name&gt;.&lt;capability&gt;</code>. The condition also has inner fields to specify details of the search. The way you create a <code class="literal">provider</code> condition and its inner fields depends on which provider you use and which capability you invoke.
								</p><p class="simpara">
									The table below lists the available providers and their capabilities. Select a provider and its capability that suit the purpose of the rule you want to create. This part of the condition does not contain any of the condition’s fields yet.
								</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 25%; " class="col_2"/><col style="width: 60%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm45236656960160" scope="col">Provider</th><th align="left" valign="top" id="idm45236660734224" scope="col">Capability</th><th align="left" valign="top" id="idm45236660733136" scope="col">Description</th></tr></thead><tbody><tr><td rowspan="2" align="left" valign="middle" headers="idm45236656960160">
												<p>
													<code class="literal">java</code>
												</p>
												</td><td align="left" valign="top" headers="idm45236660734224">
												<p>
													<code class="literal">referenced</code>
												</p>
												</td><td align="left" valign="top" headers="idm45236660733136">
												<p>
													Finds references of a pattern, including annotations, with an optional code location for detailed searches
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm45236660734224">
												<p>
													<code class="literal">dependency</code>
												</p>
												</td><td align="left" valign="top" headers="idm45236660733136">
												<p>
													Checks whether the application has a given dependency
												</p>
												</td></tr><tr><td rowspan="5" align="left" valign="middle" headers="idm45236656960160">
												<p>
													<code class="literal">builtin</code>
												</p>
												</td><td align="left" valign="top" headers="idm45236660734224">
												<p>
													<code class="literal">xml</code>
												</p>
												</td><td align="left" valign="top" headers="idm45236660733136">
												<p>
													Searches XML files using XPath queries
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm45236660734224">
												<p>
													<code class="literal">json</code>
												</p>
												</td><td align="left" valign="top" headers="idm45236660733136">
												<p>
													Searches JSON files using JSONPath queries
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm45236660734224">
												<p>
													<code class="literal">filecontent</code>
												</p>
												</td><td align="left" valign="top" headers="idm45236660733136">
												<p>
													Searches content in regular files using RegEx patterns
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm45236660734224">
												<p>
													<code class="literal">file</code>
												</p>
												</td><td align="left" valign="top" headers="idm45236660733136">
												<p>
													Finds files with names matching a given pattern
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm45236660734224">
												<p>
													<code class="literal">hasTags</code>
												</p>
												</td><td align="left" valign="top" headers="idm45236660733136">
												<p>
													Checks whether a tag is created for the application through a tagging rule
												</p>
												</td></tr><tr><td rowspan="2" align="left" valign="middle" headers="idm45236656960160">
												<p>
													go
												</p>
												</td><td align="left" valign="top" headers="idm45236660734224">
												<p>
													<code class="literal">referenced</code>
												</p>
												</td><td align="left" valign="top" headers="idm45236660733136">
												<p>
													Finds references of a pattern
												</p>
												</td></tr><tr><td align="left" valign="top" headers="idm45236660734224">
												<p>
													<code class="literal">dependency</code>
												</p>
												</td><td align="left" valign="top" headers="idm45236660733136">
												<p>
													Checks whether the application has a given dependency
												</p>
												</td></tr></tbody></table></div><p class="simpara">
									The example below shows a <code class="literal">java</code> provider condition that uses the <code class="literal">referenced</code> capability.
								</p><p class="simpara">
									<span class="emphasis"><em>Example</em></span>
								</p><pre class="programlisting language-terminal">when:
  java.referenced:</pre></li></ol></div></li><li class="listitem"><p class="simpara">
							Add suitable fields to the <code class="literal">provider</code> condition.
						</p><p class="simpara">
							The table below lists all available providers, their capabilities, and their fields. Select the fields that belong to the provider and capability that you have chosen. Note that some fields are mandatory.
						</p><div class="informaltable"><table class="gt-4-cols lt-7-rows"><colgroup><col style="width: 15%; " class="col_1"/><col style="width: 15%; " class="col_2"/><col style="width: 20%; " class="col_3"/><col style="width: 15%; " class="col_4"/><col style="width: 35%; " class="col_5"/></colgroup><thead><tr><th align="left" valign="top" id="idm45236658271184" scope="col">Provider</th><th align="left" valign="top" id="idm45236658270096" scope="col">Capability</th><th align="left" valign="top" id="idm45236658269008" scope="col">Field</th><th align="left" valign="top" id="idm45236658267920" scope="col">Required?</th><th align="left" valign="top" id="idm45236658266832" scope="col">Description</th></tr></thead><tbody><tr><td rowspan="7" align="left" valign="middle" headers="idm45236658271184">
										<p>
											<code class="literal">java</code>
										</p>
										</td><td rowspan="3" align="left" valign="middle" headers="idm45236658270096">
										<p>
											<code class="literal">referenced</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">pattern</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											Yes
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											RegEx pattern
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">location</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											No
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											Source code location; see below for a list of all supported search locations
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">annotated</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											No
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											Annotations and their elements (name and value)
										</p>
										</td></tr><tr><td rowspan="4" align="left" valign="middle" headers="idm45236658270096">
										<p>
											<code class="literal">dependency</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">name</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											Yes
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											Name of the dependency
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">nameregex</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											No
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											RegEx pattern to match the name
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">upperbound</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											No
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											Matches version numbers lower than or equal to
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">lowerbound</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											No
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											Matches version numbers greater than or equal to
										</p>
										</td></tr><tr><td rowspan="9" align="left" valign="middle" headers="idm45236658271184">
										<p>
											<code class="literal">builtin</code>
										</p>
										</td><td rowspan="3" align="left" valign="middle" headers="idm45236658270096">
										<p>
											<code class="literal">xml</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">xpath</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											Yes
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											XPath query
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">namespaces</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											No
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											A map to scope down query to namespaces
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">filepaths</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											No
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											Optional list of files to scope down search
										</p>
										</td></tr><tr><td rowspan="2" align="left" valign="middle" headers="idm45236658270096">
										<p>
											<code class="literal">json</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">xpath</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											Yes
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											XPath query
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">filepaths</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											No
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											Optional list of files to scope down search
										</p>
										</td></tr><tr><td rowspan="2" align="left" valign="middle" headers="idm45236658270096">
										<p>
											<code class="literal">filecontent</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">pattern</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											Yes
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											RegEx pattern to match in content
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">filePattern</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											No
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											Only searches in files with names matching this pattern
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236658270096">
										<p>
											<code class="literal">file</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">pattern</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											Yes
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											Finds files with names matching this pattern
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236658270096">
										<p>
											<code class="literal">hasTags</code>
										</p>
										</td><td colspan="3" align="center" valign="top" headers="idm45236658270096 idm45236658271184 idm45236658267920">
										<p>
											This is an inline list of string tags. See <span class="strong strong"><strong>Tag Actions</strong></span> in <a class="link" href="#yaml-rule-actions_rules-development-guide" title="2.1.1.3. Rule Actions">Rule Actions</a> for details on tag format.
										</p>
										</td></tr><tr><td rowspan="5" align="left" valign="middle" headers="idm45236658271184">
										<p>
											<code class="literal">go</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658270096">
										<p>
											<code class="literal">referenced</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">pattern</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											Yes
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											RegEx pattern
										</p>
										</td></tr><tr><td rowspan="4" align="left" valign="middle" headers="idm45236658270096">
										<p>
											<code class="literal">dependency</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">name</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											Yes
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											Name of the dependency
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">nameregex</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											No
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											RegEx pattern to match the name
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">upperbound</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											No
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											Matches version numbers lower than or equal to
										</p>
										</td></tr><tr><td align="left" valign="top" headers="idm45236658269008">
										<p>
											<code class="literal">lowerbound</code>
										</p>
										</td><td align="left" valign="top" headers="idm45236658267920">
										<p>
											No
										</p>
										</td><td align="left" valign="top" headers="idm45236658266832">
										<p>
											Matches version numbers greater than or equal to
										</p>
										</td></tr></tbody></table></div><p class="simpara">
							The following search locations can be used to scope down <code class="literal">java</code> searches:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
									CONSTRUCTOR_CALL
								</li><li class="listitem">
									TYPE
								</li><li class="listitem">
									INHERITANCE
								</li><li class="listitem">
									METHOD_CALL
								</li><li class="listitem">
									ANNOTATION
								</li><li class="listitem">
									IMPLEMENTS_TYPE
								</li><li class="listitem">
									ENUM_CONSTANT
								</li><li class="listitem">
									RETURN_TYPE
								</li><li class="listitem">
									IMPORT
								</li><li class="listitem"><p class="simpara">
									VARIABLE_DECLARATION
								</p><p class="simpara">
									The example below shows the <code class="literal">when</code> condition of a rule that searches for references of a package.
								</p><p class="simpara">
									<span class="emphasis"><em>Example</em></span>
								</p><pre class="programlisting language-terminal">when:
  java.referenced:
    location: PACKAGE
    pattern: org.jboss.*</pre></li></ul></div></li><li class="listitem"><p class="simpara">
							Create an <code class="literal">AND</code> or <code class="literal">OR</code> condition
						</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
									An <code class="literal">and</code> condition matches when <span class="emphasis"><em>all</em></span> of its child conditions match. Create an <code class="literal">and</code> condition as follows:
								</p><pre class="programlisting language-terminal">when:
  and:
  - java.dependency:
      name: junit.junit
      upperbound: 4.12.2
      lowerbound: 4.4.0
  - java.referenced:
      location: IMPORT
      pattern: junit.junit</pre></li><li class="listitem"><p class="simpara">
									An <code class="literal">or</code> condition matches when <span class="emphasis"><em>any</em></span> of its child conditions match. Create an <code class="literal">or</code> condition as follows:
								</p><pre class="programlisting language-terminal">when:
  or:
  - java.dependency:
      name: junit.junit
      upperbound: 4.12.2
      lowerbound: 4.4.0
  - java.referenced:
      location: IMPORT
      pattern: junit.junit</pre></li></ul></div></li></ol></div></section><section class="section" id="running-analysis-using-custom-yaml-rule_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">2.2.4. Running an analysis using a custom YAML rule</h3></div></div></div><p>
					To run an analysis, use the <code class="literal">--rules</code> option in the CLI.
				</p><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							To use the rules in a single rule file, <code class="literal">/home/&lt;USER&gt;/rule.yaml</code>, run the following command:
						</p><pre class="programlisting language-terminal">mta-cli analyze --input /home/&lt;USER&gt;/data/ --output /home/&lt;USER&gt;/output/ --rules /home/&lt;USER&gt;/rule.yaml</pre><p class="simpara">
							where:
						</p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem">
									<code class="literal">/home/&lt;USER&gt;/data/</code> - the directory of the source code or binary
								</li><li class="listitem">
									<code class="literal">/home/&lt;USER&gt;/output/</code> - the directory for reports (HTML and YAML)
								</li></ul></div></li><li class="listitem">
							To use multiple rule files, you need to place them in a directory and to add a <code class="literal">ruleset.yaml</code> file. Then the directory is treated as a <span class="emphasis"><em>ruleset</em></span>, and you can pass it as input to the <code class="literal">--rules</code> option.
						</li></ul></div><p>
					Note that if you wish to use the <code class="literal">--target</code> or <code class="literal">--source</code> option in the CLI, the engine will only select rules that match the label for that target. Therefore, make sure that you have added target or source labels on your rules. See <a class="link" href="#yaml-rule-labels_rules-development-guide" title="2.1.1.1. Rule labels">Reserved labels</a> for more details.
				</p></section></section><section class="section" id="create-first-yaml-rule_rules-development-guide"><div class="titlepage"><div><div><h2 class="title">2.3. Creating your first YAML rule</h2></div></div></div><p>
				This section guides you through the process of creating and testing your first MTA YAML-based rule. This assumes that you have already installed MTA. See <a class="link" href="https://access.redhat.com/documentation/en-us/migration_toolkit_for_applications/7.1/html-single/cli_guide/index#installing_and_running_the_cli">Installing and running the CLI</a> in the <span class="emphasis"><em>CLI Guide</em></span> for installation instructions.
			</p><p>
				In this example, you will create a rule to discover instances where an application defines a <code class="literal">jboss-web.xml</code> file containing a <code class="literal">&lt;class-loading&gt;</code> element and to provide a link to the documentation that describes how to migrate the code.
			</p><section class="section" id="creating-yaml-file-for-the-rule_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">2.3.1. Creating a YAML file for the rule</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							Create a YAML file for your first rule.
						</li></ul></div><pre class="screen">$ mkdir /home/&lt;USER&gt;/rule.yaml</pre></section><section class="section" id="mta-creating-data-to-test-the-rule_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">2.3.2. Creating data to test the rule</h3></div></div></div><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Create <code class="literal">jboss-web.xml</code> and <code class="literal">pom.xml</code> files in a directory:
						</p><pre class="screen">mkdir /home/&lt;USER&gt;/data/
touch /home/&lt;USER&gt;/data/jboss-web.xml
touch /home/&lt;USER&gt;/data/pom.xml</pre></li><li class="listitem"><p class="simpara">
							In the <code class="literal">jboss-web.xml</code> file you created, paste the following content:
						</p><pre class="screen">&lt;!DOCTYPE jboss-web PUBLIC "-//JBoss//DTD Web Application 4.2//EN" "http://www.jboss.org/j2ee/dtd/jboss-web_4_2.dtd"&gt;
&lt;jboss-web&gt;
    &lt;class-loading java2ClassLoadingCompliance="false"&gt;
        &lt;loader-repository&gt;
            seam.jboss.org:loader=@projectName@
            &lt;loader-repository-config&gt;java2ParentDelegation=false&lt;/loader-repository-config&gt;
        &lt;/loader-repository&gt;
    &lt;/class-loading&gt;
&lt;/jboss-web&gt;</pre></li><li class="listitem"><p class="simpara">
							In the <code class="literal">pom.xml</code> file you created, paste the following content:
						</p><pre class="screen">&lt;project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd"&gt;
&lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

  &lt;groupId&gt;test&lt;/groupId&gt;
  &lt;artifactId&gt;test&lt;/artifactId&gt;
  &lt;version&gt;1.1.0-SNAPSHOT&lt;/version&gt;

  &lt;properties&gt;
	&lt;maven.compiler.source&gt;1.7&lt;/maven.compiler.source&gt;
	&lt;maven.compiler.target&gt;1.7&lt;/maven.compiler.target&gt;
  &lt;/properties&gt;

  &lt;dependencies&gt;
  &lt;/dependencies&gt;
&lt;/project&gt;</pre></li></ol></div></section><section class="section" id="mta-creating-the-rule_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">2.3.3. Creating the rule</h3></div></div></div><p>
					MTA YAML-based rules use the following rule pattern:
				</p><pre class="screen">when(condition)
  perform(action)</pre><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							In the <code class="literal">rule.yaml</code> file you created, paste the following contents:
						</p><pre class="screen">- ruleID: &lt;UNIQUE_RULE_ID&gt; <span id="CO12-1"/><span class="callout">1</span>
  description: &lt;DESCRIPTION&gt; <span id="CO12-2"/><span class="callout">2</span>
  when:
    &lt;CONDITION(S)&gt; <span id="CO12-3"/><span class="callout">3</span>
  message: &lt;MESSAGE&gt; <span id="CO12-4"/><span class="callout">4</span>
  labels: &lt;LABELS&gt; <span id="CO12-5"/><span class="callout">5</span>
  effort: &lt;EFFORT&gt; <span id="CO12-6"/><span class="callout">6</span>
  links:
  - &lt;LINKS&gt; <span id="CO12-7"/><span class="callout">7</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO12-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Unique ID for your rule. For example, <code class="literal">jboss5-web-class-loading</code>.
								</div></dd><dt><a href="#CO12-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Text description of the rule.
								</div></dd><dt><a href="#CO12-3"><span class="callout">3</span></a> </dt><dd><div class="para">
									Complete the <code class="literal">when</code> block specifying one or more conditions:
								</div><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
											Use the <code class="literal">builtin</code> provider’s XML capability because this rule checks for a match in an XML file.
										</li><li class="listitem"><p class="simpara">
											To match on the <code class="literal">class-loading</code> element that is a child of <code class="literal">jboss-web</code>, use the XPath expression <code class="literal">jboss-web/web-loading</code> as an XML query. In this case, you need just one condition:
										</p><pre class="screen">when:
  builtin.xml:
    xpath: jboss-web/class-loading</pre></li></ol></div></dd><dt><a href="#CO12-4"><span class="callout">4</span></a> </dt><dd><div class="para">
									Helpful message explaining the migration issue. The message is generated in the report when the rule matches. For example:
								</div><pre class="screen">message: The class-loading element is no longer valid in the jboss-web.xml file.</pre></dd><dt><a href="#CO12-5"><span class="callout">5</span></a> </dt><dd><div class="para">
									List of string labels for the rule.
								</div></dd><dt><a href="#CO12-6"><span class="callout">6</span></a> </dt><dd><div class="para">
									Number of expected story points to fix this issue.
								</div></dd><dt><a href="#CO12-7"><span class="callout">7</span></a> </dt><dd><div class="para">
									One or more hyperlinks pointing to documentation around the migration issues that you find.
								</div><pre class="screen">links:
- url: https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.4/html-single/Migration_Guide/index.html#Create_or_Modify_Files_That_Control_Class_Loading_in_JBoss_Enterprise_Application_Platform_6
  title: Create or Modify Files That Control Class Loading in JBoss EAP 6</pre><p>
									The rule is now complete and looks similar to the following:
								</p><pre class="screen">- ruleID: jboss5-web-class-loading
  description: Find class loading element in JBoss XML file.
  when:
    builtin.xml:
      xpath: jboss-web/class-loading
  message: The class-loading element is no longer valid in the jboss-web.xml file.
  effort: 3
  links:
  - url: https://access.redhat.com/documentation/en-US/JBoss_Enterprise_Application_Platform/6.4/html-single/Migration_Guide/index.html#Create_or_Modify_Files_That_Control_Class_Loading_in_JBoss_Enterprise_Application_Platform_6
    title: Create or Modify Files That Control Class Loading in JBoss EAP 6</pre></dd></dl></div></li></ul></div></section><section class="section" id="mta-installing-the-rule_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">2.3.4. Installing the rule</h3></div></div></div><div class="itemizedlist"><p class="title"><strong>Procedure</strong></p><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
							Point the CLI to the rule file you created :
						</p><pre class="screen">–rules /home/&lt;USER&gt;/rules.yaml</pre></li></ul></div></section><section class="section" id="mta-testing-the-rule_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">2.3.5. Testing the rule</h3></div></div></div><div class="formalpara"><p class="title"><strong>Procedure</strong></p><p>
						To test the rule, point the input to the test data you created and pass the rule using the rules option in MTA CLI:
					</p></div><pre class="screen">mta-cli analyze --input /home/&lt;USER&gt;/data/ --output /home/&lt;USER&gt;/output/ --rules /home/&lt;USER&gt;/rules.yaml</pre></section><section class="section" id="mta-reviewing-the-report_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">2.3.6. Reviewing the report</h3></div></div></div><p>
					Review the report to be sure that it provides the expected results.
				</p><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem"><p class="simpara">
							Once the analysis is complete, the command outputs the path to the HTML report:
						</p><pre class="screen">INFO[0066] Static report created. Access it at this URL:  URL="file:/home/&lt;USER&gt;/output/static-report/index.html"</pre><p class="simpara">
							Open <code class="literal">/home/&lt;USER_NAME&gt;/output/static-report/index.html</code> in a web browser.
						</p></li><li class="listitem">
							Navigate to the <span class="strong strong"><strong>Issues</strong></span> tab in the left menu.
						</li><li class="listitem"><p class="simpara">
							Verify that the rule is executed:
						</p><div class="orderedlist"><ol class="orderedlist" type="a"><li class="listitem">
									In the <span class="strong strong"><strong>Issues</strong></span> table, type <code class="literal">JBoss XML</code> in the search bar.
								</li><li class="listitem">
									Verify that the issue with the title <code class="literal">Find class loading element in JBoss XML file</code> is present in the table.
								</li></ol></div></li><li class="listitem">
							Click the <span class="strong strong"><strong>jboss-web.xml</strong></span> link to open the affected file.
						</li></ol></div></section></section><section class="section" id="validation-report_rules-development-guide"><div class="titlepage"><div><div><h2 class="title">2.4. About validation reports</h2></div></div></div><p>
				Validation reports provide details about test rules and failures and contain the following sections:
			</p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Summary</strong></span>
					</p><p class="simpara">
						This section contains the total number of tests run and reports the number of errors and failures. It displays the total success rate and the time taken, in seconds, for the report to be generated.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Package List</strong></span>
					</p><p class="simpara">
						This section contains the number of tests executed for each package and reports the number of errors and failures. It displays the success rate and the time taken, in seconds, for each package to be analyzed.
					</p><p class="simpara">
						A single package named <code class="literal">org.jboss.windup.rules.tests</code> is displayed unless additional test cases have been defined.
					</p></li><li class="listitem"><p class="simpara">
						<span class="strong strong"><strong>Test Cases</strong></span>
					</p><p class="simpara">
						This section describes the test cases. Each failure includes a <span class="strong strong"><strong>Details</strong></span> section that can be expanded to show the stack trace for the assertion, including a human-readable line indicating the source of the error.
					</p></li></ul></div><section class="section" id="validation-report-understanding_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">2.4.1. Creating a validation report</h3></div></div></div><p>
					You can create a validation report for your custom rules.
				</p><div class="itemizedlist"><p class="title"><strong>Prerequisites</strong></p><ul class="itemizedlist" type="disc"><li class="listitem">
							You must fork and clone the MTA XML rules.
						</li><li class="listitem">
							You must have one or more test XML rules to validate.
						</li></ul></div><div class="orderedlist"><p class="title"><strong>Procedure</strong></p><ol class="orderedlist" type="1"><li class="listitem">
							Navigate to the local <code class="literal">windup-rulesets</code> repository.
						</li><li class="listitem">
							Create a directory for your custom rules and tests: <code class="literal">windup-rulesets/rules-reviewed/myTests</code>.
						</li><li class="listitem">
							Copy your custom rules and tests to the <code class="literal">windup-rulesets/rules-reviewed/&lt;myTests&gt;</code> directory.
						</li><li class="listitem"><p class="simpara">
							Run the following command from the root directory of the <code class="literal">windup-rulesets</code> repository:
						</p><pre class="screen">$ mvn -Dtest=WindupRulesMultipleTests -DrunTestsMatching=&lt;myTests&gt; clean &lt;myReport&gt;:report <span id="CO13-1"/><span class="callout">1</span> <span id="CO13-2"/><span class="callout">2</span></pre><div class="calloutlist"><dl class="calloutlist"><dt><a href="#CO13-1"><span class="callout">1</span></a> </dt><dd><div class="para">
									Specify the directory containing your custom rules and tests. If you omit the <code class="literal">-DrunTestsMatching</code> argument, the validation report will include all the tests and take much longer to generate.
								</div></dd><dt><a href="#CO13-2"><span class="callout">2</span></a> </dt><dd><div class="para">
									Specify your report name.
								</div></dd></dl></div><p class="simpara">
							The validation report is created in the <code class="literal">windup-rulesets/target/site/</code> repository.
						</p></li></ol></div></section><section class="section" id="validation-report-errors_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">2.4.2. Validation report error messages</h3></div></div></div><p>
					Validation reports contain errors encountered while running the rules and tests.
				</p><p>
					The following table contains error messages and how to resolve the errors.
				</p><div class="table" id="idm45236659759488"><p class="title"><strong>Table 2.1. Validation report error messages</strong></p><div class="table-contents"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"/><col style="width: 35%; " class="col_2"/><col style="width: 40%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm45236659505120" scope="col">Error message</th><th align="left" valign="top" id="idm45236659504032" scope="col">Description</th><th align="left" valign="top" id="idm45236659502944" scope="col">Resolution</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm45236659505120">
								<p>
									No test file matching rule
								</p>
								</td><td align="left" valign="top" headers="idm45236659504032">
								<p>
									This error occurs when a rule file exists without a corresponding test file.
								</p>
								</td><td align="left" valign="top" headers="idm45236659502944">
								<p>
									Create a test file for the existing rule.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm45236659505120">
								<p>
									Test rule Ids &lt;RULE_NAME&gt; not found!
								</p>
								</td><td align="left" valign="top" headers="idm45236659504032">
								<p>
									This error is thrown when a rule exists without a corresponding ruletest.
								</p>
								</td><td align="left" valign="top" headers="idm45236659502944">
								<p>
									Create a test for the existing rule.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm45236659505120">
								<p>
									XML parse fail on file &lt;FILE_NAME&gt;
								</p>
								</td><td align="left" valign="top" headers="idm45236659504032">
								<p>
									The syntax in the XML file is invalid, and unable to be parsed successfully by the rule validator.
								</p>
								</td><td align="left" valign="top" headers="idm45236659502944">
								<p>
									Correct the invalid syntax.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm45236659505120">
								<p>
									Test file path from <code class="literal">&lt;testDataPath&gt;</code> tag has not been found. Expected path to test file is: &lt;RULE_DATA_PATH&gt;
								</p>
								</td><td align="left" valign="top" headers="idm45236659504032">
								<p>
									No files are found in the path defined in the <code class="literal">&lt;testDataPath&gt;</code> tag within the test rule.
								</p>
								</td><td align="left" valign="top" headers="idm45236659502944">
								<p>
									Create the path defined in the <code class="literal">&lt;testDataPath&gt;</code> tag, and ensure all necessary data files are located within this directory.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm45236659505120">
								<p>
									The rule with id="&lt;RULE_ID&gt;" has not been executed.
								</p>
								</td><td align="left" valign="top" headers="idm45236659504032">
								<p>
									The rule with the provided id has not been executed during this validation.
								</p>
								</td><td align="left" valign="top" headers="idm45236659502944">
								<p>
									Ensure that a test data file exists that matches the conditions defined in the specified rule.
								</p>
								</td></tr></tbody></table></div></div></section></section></section><section class="appendix" id="reference_material"><div class="titlepage"><div><div><h1 class="title">Appendix A. Reference material</h1></div></div></div><section class="section" id="about-story-points_rules-development-guide"><div class="titlepage"><div><div><h2 class="title">A.1. About rule story points</h2></div></div></div><section class="section" id="what_are_story_points"><div class="titlepage"><div><div><h3 class="title">A.1.1. What are story points?</h3></div></div></div><p>
					<span class="emphasis"><em>Story points</em></span> are an abstract metric commonly used in Agile software development to estimate the <span class="emphasis"><em>level of effort</em></span> needed to implement a feature or change.
				</p><p>
					The Migration Toolkit for Applications uses story points to express the level of effort needed to migrate particular application constructs, and the application as a whole. It does not necessarily translate to man-hours, but the value should be consistent across tasks.
				</p></section><section class="section" id="how_story_points_are_estimated_in_rules"><div class="titlepage"><div><div><h3 class="title">A.1.2. How story points are estimated in rules</h3></div></div></div><p>
					Estimating the level of effort for the story points for a rule can be tricky. The following are the general guidelines MTA uses when estimating the level of effort required for a rule.
				</p><div class="informaltable"><table class="lt-4-cols lt-7-rows"><colgroup><col style="width: 25%; " class="col_1"/><col style="width: 15%; " class="col_2"/><col style="width: 60%; " class="col_3"/></colgroup><thead><tr><th align="left" valign="top" id="idm45236659327216" scope="col">Level of Effort</th><th align="left" valign="top" id="idm45236659326128" scope="col">Story Points</th><th align="left" valign="top" id="idm45236659325040" scope="col">Description</th></tr></thead><tbody><tr><td align="left" valign="top" headers="idm45236659327216">
								<p>
									Information
								</p>
								</td><td align="left" valign="top" headers="idm45236659326128">
								<p>
									0
								</p>
								</td><td align="left" valign="top" headers="idm45236659325040">
								<p>
									An informational warning with very low or no priority for migration.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm45236659327216">
								<p>
									Trivial
								</p>
								</td><td align="left" valign="top" headers="idm45236659326128">
								<p>
									1
								</p>
								</td><td align="left" valign="top" headers="idm45236659325040">
								<p>
									The migration is a trivial change or a simple library swap with no or minimal API changes.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm45236659327216">
								<p>
									Complex
								</p>
								</td><td align="left" valign="top" headers="idm45236659326128">
								<p>
									3
								</p>
								</td><td align="left" valign="top" headers="idm45236659325040">
								<p>
									The changes required for the migration task are complex, but have a documented solution.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm45236659327216">
								<p>
									Redesign
								</p>
								</td><td align="left" valign="top" headers="idm45236659326128">
								<p>
									5
								</p>
								</td><td align="left" valign="top" headers="idm45236659325040">
								<p>
									The migration task requires a redesign or a complete library change, with significant API changes.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm45236659327216">
								<p>
									Rearchitecture
								</p>
								</td><td align="left" valign="top" headers="idm45236659326128">
								<p>
									7
								</p>
								</td><td align="left" valign="top" headers="idm45236659325040">
								<p>
									The migration requires a complete rearchitecture of the component or subsystem.
								</p>
								</td></tr><tr><td align="left" valign="top" headers="idm45236659327216">
								<p>
									Unknown
								</p>
								</td><td align="left" valign="top" headers="idm45236659326128">
								<p>
									13
								</p>
								</td><td align="left" valign="top" headers="idm45236659325040">
								<p>
									The migration solution is not known and may need a complete rewrite.
								</p>
								</td></tr></tbody></table></div></section><section class="section" id="task_category"><div class="titlepage"><div><div><h3 class="title">A.1.3. Task category</h3></div></div></div><p>
					In addition to the level of effort, you can categorize migration tasks to indicate the severity of the task. The following categories are used to group issues to help prioritize the migration effort.
				</p><div class="variablelist"><dl class="variablelist"><dt><span class="term">Mandatory</span></dt><dd>
								The task must be completed for a successful migration. If the changes are not made, the resulting application will not build or run successfully. Examples include replacement of proprietary APIs that are not supported in the target platform.
							</dd><dt><span class="term">Optional</span></dt><dd>
								If the migration task is not completed, the application should work, but the results may not be optimal. If the change is not made at the time of migration, it is recommended to put it on the schedule soon after your migration is completed.
							</dd><dt><span class="term">Potential</span></dt><dd>
								The task should be examined during the migration process, but there is not enough detailed information to determine if the task is mandatory for the migration to succeed. An example of this would be migrating a third-party proprietary type where there is no directly compatible type.
							</dd><dt><span class="term">Information</span></dt><dd>
								The task is included to inform you of the existence of certain files. These may need to be examined or modified as part of the modernization effort, but changes are typically not required.
							</dd></dl></div></section></section><section class="section" id="additional_resources"><div class="titlepage"><div><div><h2 class="title">A.2. Additional resources</h2></div></div></div><section class="section" id="rules-important-links_rules-development-guide"><div class="titlepage"><div><div><h3 class="title">A.2.1. Additional resources</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem">
							MTA Jira issue tracker: <a class="link" href="https://issues.redhat.com/projects/MTA/issues">https://issues.redhat.com/projects/MTA/issues</a>
						</li><li class="listitem">
							MTA mailing list: <a class="link" href="mailto:windup-eng@redhat.com">windup-eng@redhat.com</a>
						</li></ul></div><p>
					<br/>
				</p><p>
					<span class="emphasis"><em><span class="right right">Revised on 2024-09-30 12:16:25 UTC</span></em></span>
				</p><div class="informalexample"/></section></section></section><div><div xml:lang="en-US" class="legalnotice" id="idm45236657933760"><h1 class="legalnotice">Legal Notice</h1><div class="para">
		Copyright <span class="trademark"/>© 2024 Red Hat, Inc.
	</div><div class="para">
		The text of and illustrations in this document are licensed by Red Hat under a Creative Commons Attribution–Share Alike 3.0 Unported license ("CC-BY-SA"). An explanation of CC-BY-SA is available at <a class="uri" href="http://creativecommons.org/licenses/by-sa/3.0/">http://creativecommons.org/licenses/by-sa/3.0/</a>. In accordance with CC-BY-SA, if you distribute this document or an adaptation of it, you must provide the URL for the original version.
	</div><div class="para">
		Red Hat, as the licensor of this document, waives the right to enforce, and agrees not to assert, Section 4d of CC-BY-SA to the fullest extent permitted by applicable law.
	</div><div class="para">
		Red Hat, Red Hat Enterprise Linux, the Shadowman logo, the Red Hat logo, JBoss, OpenShift, Fedora, the Infinity logo, and RHCE are trademarks of Red Hat, Inc., registered in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Linux</span>® is the registered trademark of Linus Torvalds in the United States and other countries.
	</div><div class="para">
		<span class="trademark">Java</span>® is a registered trademark of Oracle and/or its affiliates.
	</div><div class="para">
		<span class="trademark">XFS</span>® is a trademark of Silicon Graphics International Corp. or its subsidiaries in the United States and/or other countries.
	</div><div class="para">
		<span class="trademark">MySQL</span>® is a registered trademark of MySQL AB in the United States, the European Union and other countries.
	</div><div class="para">
		<span class="trademark">Node.js</span>® is an official trademark of Joyent. Red Hat is not formally related to or endorsed by the official Joyent Node.js open source or commercial project.
	</div><div class="para">
		The <span class="trademark">OpenStack</span>® Word Mark and OpenStack logo are either registered trademarks/service marks or trademarks/service marks of the OpenStack Foundation, in the United States and other countries and are used with the OpenStack Foundation's permission. We are not affiliated with, endorsed or sponsored by the OpenStack Foundation, or the OpenStack community.
	</div><div class="para">
		All other trademarks are the property of their respective owners.
	</div></div></div></div></div></div><script type="text/javascript">
                        jQuery(document).ready(function() {
                            initSwitchery();
                            jQuery('pre[class*="language-"]').each(function(i, block){hljs.highlightBlock(block);});
                        });
                    </script></body></html>